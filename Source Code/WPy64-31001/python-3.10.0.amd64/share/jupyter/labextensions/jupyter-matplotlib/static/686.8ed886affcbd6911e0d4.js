"use strict";(self.webpackChunkjupyter_matplotlib=self.webpackChunkjupyter_matplotlib||[]).push([[686,108],{686:(e,t,i)=>{i.r(t),i.d(t,{MODULE_NAME:()=>r.o,MODULE_VERSION:()=>r.Y,MPLCanvasModel:()=>l,MPLCanvasView:()=>h,ToolbarModel:()=>d,ToolbarView:()=>_});var s=i(335);function o(e,t){const i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}function n(e){return Object.keys(e).reduce(((t,i)=>("object"!=typeof e[i]&&(t[i]=e[i]),t)),{})}function a(e){const t=e.getContext("2d");if(null===t)throw"Could not create 2d context.";return t}var r=i(657);class l extends s.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"MPLCanvasModel",_view_name:"MPLCanvasView",_model_module:"jupyter-matplotlib",_view_module:"jupyter-matplotlib",_model_module_version:"^"+r.Y,_view_module_version:"^"+r.Y,header_visible:!0,footer_visible:!0,toolbar:null,toolbar_visible:!0,toolbar_position:"horizontal",resizable:!0,capture_scroll:!1,_data_url:null,_width:0,_height:0,_figure_label:"Figure",_message:"",_cursor:"pointer",_image_mode:"full",_rubberband_x:0,_rubberband_y:0,_rubberband_width:0,_rubberband_height:0})}initialize(e,t){super.initialize(e,t),this.offscreen_canvas=document.createElement("canvas"),this.offscreen_context=a(this.offscreen_canvas);const i=this.offscreen_context,s=i.backingStorePixelRatio||i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||1;this.requested_size=null,this.resize_requested=!1,this.ratio=(window.devicePixelRatio||1)/s,this.resize_canvas(this.get("_width"),this.get("_height")),this._init_image(),this.on("msg:custom",this.on_comm_message.bind(this)),this.on("change:resizable",(()=>{this._for_each_view((e=>{e.update_canvas()}))})),this.on("comm_live_update",this.update_disabled.bind(this)),this.update_disabled(),this.send_initialization_message()}get disabled(){return!this.comm_live}update_disabled(){this.set("resizable",!this.disabled)}sync(e,t,i={}){i.attrs&&delete i.attrs._data_url,super.sync(e,t,i)}send_message(e,t={}){t.type=e,this.send(t,{})}send_initialization_message(){1!==this.ratio&&(this.send_message("set_dpi_ratio",{dpi_ratio:this.ratio}),this.send_message("set_device_pixel_ratio",{device_pixel_ratio:this.ratio})),this.send_message("refresh"),this.send_message("send_image_mode"),this.send_message("initialized")}send_draw_message(){this.waiting_for_image||(this.waiting_for_image=!0,this.send_message("draw"))}handle_save(){const e=document.createElement("a");e.href=this.offscreen_canvas.toDataURL(),e.download=this.get("_figure_label")+".png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}handle_resize(e){const t=e.size;this.resize_canvas(t[0],t[1]),this.offscreen_context.drawImage(this.image,0,0),this.resize_requested||this._for_each_view((e=>{e.resize_canvas(t[0],t[1])})),this.send_message("refresh"),this.resize_requested=!1,null!==this.requested_size&&(this.resize(this.requested_size[0],this.requested_size[1]),this.requested_size=null)}resize(e,t){e<=5||t<=5||(this._for_each_view((i=>{i.resize_canvas(e,t)})),this.resize_requested?this.requested_size=[e,t]:(this.resize_requested=!0,this.send_message("resize",{width:e,height:t})))}resize_canvas(e,t){this.offscreen_canvas.width=e*this.ratio,this.offscreen_canvas.height=t*this.ratio}handle_rubberband(e){let t=e.x0/this.ratio,i=(this.offscreen_canvas.height-e.y0)/this.ratio,s=e.x1/this.ratio,o=(this.offscreen_canvas.height-e.y1)/this.ratio;t=Math.floor(t)+.5,i=Math.floor(i)+.5,s=Math.floor(s)+.5,o=Math.floor(o)+.5,this.set("_rubberband_x",Math.min(t,s)),this.set("_rubberband_y",Math.min(i,o)),this.set("_rubberband_width",Math.abs(s-t)),this.set("_rubberband_height",Math.abs(o-i)),this.save_changes(),this._for_each_view((e=>{e.update_canvas()}))}handle_draw(e){this.send_draw_message()}handle_binary(e,t){const i=window.URL||window.webkitURL,s=new Uint8Array(t[0].buffer),o=new Blob([s],{type:"image/png"}),n=i.createObjectURL(o);this.image.src&&i.revokeObjectURL(this.image.src),this.image.src=n,this.set("_data_url",this.offscreen_canvas.toDataURL()),this.waiting_for_image=!1}handle_history_buttons(e){}handle_navigate_mode(e){}on_comm_message(e,t){const i=JSON.parse(e.data),s=i.type;let o;try{o=this["handle_"+s].bind(this)}catch(e){return void console.log("No handler for the '"+s+"' message type: ",i)}o&&o(i,t)}_init_image(){this.image=new Image,this.image.onload=()=>{"full"===this.get("_image_mode")&&this.offscreen_context.clearRect(0,0,this.offscreen_canvas.width,this.offscreen_canvas.height),this.offscreen_context.drawImage(this.image,0,0),this._for_each_view((e=>{e.update_canvas()}))};const e=this.get("_data_url");null!==e&&(this.image.src=e)}_for_each_view(e){for(const t in this.views)this.views[t].then((t=>{e(t)}))}remove(){this.send_message("closing")}}l.serializers=Object.assign(Object.assign({},s.DOMWidgetModel.serializers),{toolbar:{deserialize:s.unpack_models}});class h extends s.DOMWidgetView{render(){return this.resizing=!1,this.resize_handle_size=20,this.figure=document.createElement("div"),this.figure.classList.add("jupyter-matplotlib-figure","jupyter-widgets","widget-container","widget-box","widget-vbox"),this._init_header(),this._init_canvas(),this._init_footer(),this._resize_event=this.resize_event.bind(this),this._stop_resize_event=this.stop_resize_event.bind(this),window.addEventListener("mousemove",this._resize_event),window.addEventListener("mouseup",this._stop_resize_event),this.create_child_view(this.model.get("toolbar")).then((e=>{this.toolbar_view=e,this._update_toolbar_position(),this._update_header_visible(),this._update_footer_visible(),this._update_toolbar_visible(),this.model_events()}))}model_events(){this.model.on("change:header_visible",this._update_header_visible.bind(this)),this.model.on("change:footer_visible",this._update_footer_visible.bind(this)),this.model.on("change:toolbar_visible",this._update_toolbar_visible.bind(this)),this.model.on("change:toolbar_position",this._update_toolbar_position.bind(this)),this.model.on("change:_figure_label",this._update_figure_label.bind(this)),this.model.on("change:_message",this._update_message.bind(this)),this.model.on("change:_cursor",this._update_cursor.bind(this))}_update_header_visible(){this.header.style.display=this.model.get("header_visible")?"":"none"}_update_footer_visible(){this.footer.style.display=this.model.get("footer_visible")?"":"none"}_update_toolbar_visible(){this.toolbar_view.el.style.display=this.model.get("toolbar_visible")?"":"none"}_update_toolbar_position(){const e=this.model.get("toolbar_position");"top"===e||"bottom"===e?(this.el.classList.add("jupyter-widgets","widget-container","widget-box","widget-vbox","jupyter-matplotlib"),this.model.get("toolbar").set("orientation","horizontal"),this.clear(),"top"===e?(this.el.appendChild(this.toolbar_view.el),this.el.appendChild(this.figure)):(this.el.appendChild(this.figure),this.el.appendChild(this.toolbar_view.el))):(this.el.classList.add("jupyter-widgets","widget-container","widget-box","widget-hbox","jupyter-matplotlib"),this.model.get("toolbar").set("orientation","vertical"),this.clear(),"left"===e?(this.el.appendChild(this.toolbar_view.el),this.el.appendChild(this.figure)):(this.el.appendChild(this.figure),this.el.appendChild(this.toolbar_view.el)))}clear(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)}_init_header(){this.header=document.createElement("div"),this.header.style.textAlign="center",this.header.classList.add("jupyter-widgets","widget-label"),this._update_figure_label(),this.figure.appendChild(this.header)}_update_figure_label(){this.header.textContent=this.model.get("_figure_label")}_init_canvas(){const e=document.createElement("div");e.classList.add("jupyter-widgets","jupyter-matplotlib-canvas-container"),this.figure.appendChild(e);const t=this.canvas_div=document.createElement("div");t.style.position="relative",t.style.clear="both",t.classList.add("jupyter-widgets","jupyter-matplotlib-canvas-div"),t.addEventListener("keydown",this.key_event("key_press")),t.addEventListener("keyup",this.key_event("key_release")),t.setAttribute("tabindex","0"),e.appendChild(t);const i=this.canvas=document.createElement("canvas");i.style.display="block",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.zIndex="0",this.context=a(i);const s=this.top_canvas=document.createElement("canvas");s.style.display="block",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.zIndex="1",s.addEventListener("mousedown",this.mouse_event("button_press")),s.addEventListener("mouseup",this.mouse_event("button_release")),s.addEventListener("mousemove",this.mouse_event("motion_notify")),s.addEventListener("mouseenter",this.mouse_event("figure_enter")),s.addEventListener("mouseleave",this.mouse_event("figure_leave")),s.addEventListener("wheel",this.mouse_event("scroll")),t.appendChild(i),t.appendChild(s),this.top_context=a(s),this.top_context.strokeStyle="rgba(0, 0, 0, 255)",this.top_canvas.addEventListener("contextmenu",(e=>(e.preventDefault(),e.stopPropagation(),!1))),this.resize_canvas(this.model.get("_width"),this.model.get("_height")),this.update_canvas()}update_canvas(){if(0!==this.canvas.width&&0!==this.canvas.height){if(this.top_context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.model.offscreen_canvas,0,0),this.top_context.clearRect(0,0,this.top_canvas.width,this.top_canvas.height),0!==this.model.get("_rubberband_width")&&0!==this.model.get("_rubberband_height")&&(this.top_context.strokeStyle="gray",this.top_context.lineWidth=1,this.top_context.shadowColor="black",this.top_context.shadowBlur=2,this.top_context.shadowOffsetX=1,this.top_context.shadowOffsetY=1,this.top_context.strokeRect(this.model.get("_rubberband_x"),this.model.get("_rubberband_y"),this.model.get("_rubberband_width"),this.model.get("_rubberband_height"))),this.model.get("resizable")){const e=this.top_context.createLinearGradient(this.top_canvas.width-this.resize_handle_size,this.top_canvas.height-this.resize_handle_size,this.top_canvas.width,this.top_canvas.height);e.addColorStop(0,"white"),e.addColorStop(1,"black"),this.top_context.fillStyle=e,this.top_context.strokeStyle="gray",this.top_context.globalAlpha=.3,this.top_context.beginPath(),this.top_context.moveTo(this.top_canvas.width,this.top_canvas.height),this.top_context.lineTo(this.top_canvas.width,this.top_canvas.height-this.resize_handle_size),this.top_context.lineTo(this.top_canvas.width-this.resize_handle_size,this.top_canvas.height),this.top_context.closePath(),this.top_context.fill(),this.top_context.stroke()}this.top_context.restore()}}_update_cursor(){this.top_canvas.style.cursor=this.model.get("_cursor")}_init_footer(){this.footer=document.createElement("div"),this.footer.style.textAlign="center",this.footer.classList.add("jupyter-widgets","widget-label"),this._update_message(),this.figure.appendChild(this.footer)}_update_message(){this.footer.textContent=this.model.get("_message")}resize_canvas(e,t){this.canvas.setAttribute("width",""+e*this.model.ratio),this.canvas.setAttribute("height",""+t*this.model.ratio),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.top_canvas.setAttribute("width",String(e)),this.top_canvas.setAttribute("height",String(t)),this.canvas_div.style.width=e+"px",this.canvas_div.style.height=t+"px",this.update_canvas()}mouse_event(e){let t=0;return i=>{const s=o(i,this.top_canvas);if("scroll"===e&&(i.data="scroll",i.deltaY<0?i.step=1:i.step=-1,this.model.get("capture_scroll")&&i.preventDefault()),"button_press"===e){if(s.x>=this.top_canvas.width-this.resize_handle_size&&s.y>=this.top_canvas.height-this.resize_handle_size&&this.model.get("resizable"))return void(this.resizing=!0);this.canvas.focus(),this.canvas_div.focus()}if(!this.resizing&&("motion_notify"===e&&(s.x>=this.top_canvas.width-this.resize_handle_size&&s.y>=this.top_canvas.height-this.resize_handle_size?this.top_canvas.style.cursor="nw-resize":this.top_canvas.style.cursor=this.model.get("_cursor")),Date.now()>t+16)){t=Date.now();const o=s.x*this.model.ratio,a=s.y*this.model.ratio;this.model.send_message(e,{x:o,y:a,button:i.button,step:i.step,guiEvent:n(i)})}}}resize_event(e){if(this.resizing){const t=o(e,this.top_canvas);this.model.resize(t.x,t.y)}}stop_resize_event(){this.resizing=!1}key_event(e){return t=>{if(t.stopPropagation(),t.preventDefault(),"key_press"===e){if(t.key===this._key)return;this._key=t.key}"key_release"===e&&(this._key=null);let i="";return t.ctrlKey&&"Control"!==t.key?i+="ctrl+":t.altKey&&"Alt"!==t.key?i+="alt+":t.shiftKey&&"Shift"!==t.key&&(i+="shift+"),i+="k"+t.key,this.model.send_message(e,{key:i,guiEvent:n(t)}),!1}}remove(){window.removeEventListener("mousemove",this._resize_event),window.removeEventListener("mouseup",this._stop_resize_event)}}class d extends s.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"ToolbarModel",_view_name:"ToolbarView",_model_module:"jupyter-matplotlib",_view_module:"jupyter-matplotlib",_model_module_version:"^"+r.Y,_view_module_version:"^"+r.Y,toolitems:[],orientation:"vertical",button_style:"",collapsed:!0,_current_action:""})}}class _ extends s.DOMWidgetView{initialize(e){super.initialize(e),this.on("comm_live_update",this.update_disabled.bind(this))}render(){this.el.classList.add("jupyter-widgets","jupyter-matplotlib-toolbar","widget-container","widget-box"),this.create_toolbar(),this.model_events()}create_toolbar(){const e=this.model.get("toolitems");this.toggle_button=document.createElement("button"),this.toggle_button.classList.add("jupyter-matplotlib-button","jupyter-widgets","jupyter-button"),this.toggle_button.setAttribute("href","#"),this.toggle_button.setAttribute("title","Toggle Interaction"),this.toggle_button.style.outline="none",this.toggle_button.addEventListener("click",(()=>{this.model.set("collapsed",!this.model.get("collapsed")),this.model.save_changes()}));const t=document.createElement("i");t.classList.add("center","fa","fa-fw","fa-bars"),this.toggle_button.appendChild(t),this.el.appendChild(this.toggle_button),this.toolbar=document.createElement("div"),this.toolbar.classList.add("widget-container","widget-box"),this.el.appendChild(this.toolbar),this.buttons={toggle_button:this.toggle_button};for(const t in e){const i=e[t][0],s=e[t][1],o=e[t][2],n=e[t][3];if(!i)continue;const a=document.createElement("button");a.classList.add("jupyter-matplotlib-button","jupyter-widgets","jupyter-button"),a.setAttribute("href","#"),a.setAttribute("title",s),a.style.outline="none",a.addEventListener("click",this.toolbar_button_onclick(n));const r=document.createElement("i");r.classList.add("center","fa","fa-fw","fa-"+o),a.appendChild(r),this.buttons[n]=a,this.toolbar.appendChild(a)}this.set_orientation(this.el),this.set_orientation(this.toolbar),this.set_buttons_style(),this.update_disabled()}get disabled(){return!this.model.comm_live}update_disabled(){this.toggle_button.disabled=this.disabled,this.disabled&&(this.toolbar.style.display="none")}set_orientation(e){"vertical"===this.model.get("orientation")?(e.classList.remove("widget-hbox"),e.classList.add("widget-vbox")):(e.classList.add("widget-hbox"),e.classList.remove("widget-vbox"))}toolbar_button_onclick(e){return t=>{"pan"!==e&&"zoom"!==e||(this.model.get("_current_action")===e?this.model.set("_current_action",""):this.model.set("_current_action",e),this.model.save_changes()),this.send({type:"toolbar_button",name:e})}}set_buttons_style(){const e={primary:["mod-primary"],success:["mod-success"],info:["mod-info"],warning:["mod-warning"],danger:["mod-danger"]};for(const t in this.buttons){const i=this.buttons[t];for(const t in e)i.classList.remove(e[t]);i.classList.remove("mod-active");const s=this.model.get("button_style");""!==s&&i.classList.add(e[s]),t===this.model.get("_current_action")&&i.classList.add("mod-active")}}update_collapsed(){this.toolbar.style.display=this.model.get("collapsed")?"":"none"}model_events(){this.model.on("change:orientation",this.update_orientation.bind(this)),this.model.on_some_change(["button_style","_current_action"],this.set_buttons_style,this),this.model.on("change:collapsed",this.update_collapsed.bind(this))}update_orientation(){this.set_orientation(this.el),this.set_orientation(this.toolbar)}}},657:(e,t,i)=>{i.d(t,{Y:()=>o,o:()=>n});const s=i(147),o=s.version,n=s.name},147:e=>{e.exports=JSON.parse('{"name":"jupyter-matplotlib","version":"0.10.2","description":"Matplotlib Jupyter Interactive Widget","author":"Matplotlib Development team","license":"BSD-3-Clause","main":"lib/index.js","types":"./lib/index.d.ts","files":["lib/**/*.js","dist/*.js","src/**/*.css"],"repository":{"type":"git","url":"https://github.com/matplotlib/jupyter-matplotlib.git"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipympl/labextension","clean:nbextension":"rimraf ipympl/nbextension/static/index.js","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch .","eslint":"eslint . --fix --ignore-path .eslintignore --ext .ts","eslint:check":"eslint . --ignore-path .eslintignore --ext .ts","lint":"yarn run prettier && yarn run eslint","lint:check":"yarn run prettier:check && yarn run eslint:check","prepublish":"yarn run clean && yarn run build","prettier":"prettier --ignore-path .eslintignore --write \\"**/*{.ts,.css,.json}\\"","prettier:check":"prettier --check --ignore-path .eslintignore \\"**/*{.ts,.css,.json}\\""},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipympl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyterlab/builder":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.0.0","webpack-cli":"^4.0.0"},"dependencies":{"@jupyter-widgets/base":"^2 || ^3 || ^4.0.0","@types/node":"^14.14.35"},"keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"]}')}}]);