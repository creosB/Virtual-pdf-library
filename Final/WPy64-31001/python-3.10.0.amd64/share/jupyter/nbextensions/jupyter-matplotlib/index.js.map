{"version":3,"file":"index.js","mappings":"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","sources":["webpack://jupyter-matplotlib/external amd \"@jupyter-widgets/base\"","webpack://jupyter-matplotlib/webpack/bootstrap","webpack://jupyter-matplotlib/webpack/runtime/define property getters","webpack://jupyter-matplotlib/webpack/runtime/hasOwnProperty shorthand","webpack://jupyter-matplotlib/webpack/runtime/make namespace object","webpack://jupyter-matplotlib/./src/utils.ts","webpack://jupyter-matplotlib/./src/version.ts","webpack://jupyter-matplotlib/./src/mpl_widget.ts","webpack://jupyter-matplotlib/./src/toolbar_widget.ts","webpack://jupyter-matplotlib/./src/extension.ts"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__146__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Get mouse position relative to target\nexport function get_mouse_position(event: MouseEvent, targ: HTMLElement) {\n    const boundingRect = targ.getBoundingClientRect();\n\n    return {\n        x: event.clientX - boundingRect.left,\n        y: event.clientY - boundingRect.top,\n    };\n}\n\n/*\n * return a copy of an object with only non-object keys\n * we need this to avoid circular references\n * http://stackoverflow.com/a/24161582/3208463\n */\nexport function get_simple_keys(original: any) {\n    return Object.keys(original).reduce((obj: any, key) => {\n        if (typeof original[key] !== 'object') {\n            obj[key] = original[key];\n        }\n        return obj;\n    }, {});\n}\n\n// taken from ipycanvas (https://github.com/martinRenou/ipycanvas)\n// Helpful for getting a drawing context while avoiding typescript errors about a context\n// possibly being null.\n// https://github.com/martinRenou/ipycanvas/blob/8c91ec4f634ff3661f594872e8050cf27d6db0c6/src/widget.ts#L23-L29\nexport function getContext(canvas: HTMLCanvasElement) {\n    const context = canvas.getContext('2d');\n    if (context === null) {\n        throw 'Could not create 2d context.';\n    }\n    return context;\n}\n","// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexport const MODULE_VERSION = data.version;\n\n/*\n * The current package name.\n */\nexport const MODULE_NAME = data.name;\n","import {\n    DOMWidgetModel,\n    DOMWidgetView,\n    WidgetModel,\n    ISerializers,\n    unpack_models,\n} from '@jupyter-widgets/base';\n\nimport * as utils from './utils';\n\nimport { MODULE_VERSION } from './version';\n\nexport class MPLCanvasModel extends DOMWidgetModel {\n    offscreen_canvas: HTMLCanvasElement;\n    offscreen_context: CanvasRenderingContext2D;\n    requested_size: Array<number> | null;\n    resize_requested: boolean;\n    ratio: number;\n    waiting_for_image: boolean;\n    image: HTMLImageElement;\n\n    defaults() {\n        return {\n            ...super.defaults(),\n            _model_name: 'MPLCanvasModel',\n            _view_name: 'MPLCanvasView',\n            _model_module: 'jupyter-matplotlib',\n            _view_module: 'jupyter-matplotlib',\n            _model_module_version: '^' + MODULE_VERSION,\n            _view_module_version: '^' + MODULE_VERSION,\n            header_visible: true,\n            footer_visible: true,\n            toolbar: null,\n            toolbar_visible: true,\n            toolbar_position: 'horizontal',\n            resizable: true,\n            capture_scroll: false,\n            _data_url: null,\n            _width: 0,\n            _height: 0,\n            _figure_label: 'Figure',\n            _message: '',\n            _cursor: 'pointer',\n            _image_mode: 'full',\n            _rubberband_x: 0,\n            _rubberband_y: 0,\n            _rubberband_width: 0,\n            _rubberband_height: 0,\n        };\n    }\n\n    static serializers: ISerializers = {\n        ...DOMWidgetModel.serializers,\n        toolbar: { deserialize: unpack_models as any },\n    };\n\n    initialize(attributes: any, options: any) {\n        super.initialize(attributes, options);\n\n        this.offscreen_canvas = document.createElement('canvas');\n        this.offscreen_context = utils.getContext(this.offscreen_canvas);\n\n        // use `as any` to avoid typescript complaining that\n        // these browser specific attributes don't exist.\n        const context = this.offscreen_context as any;\n        const backingStore =\n            context.backingStorePixelRatio ||\n            context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            1;\n\n        this.requested_size = null;\n        this.resize_requested = false;\n        this.ratio = (window.devicePixelRatio || 1) / backingStore;\n\n        this.resize_canvas(this.get('_width'), this.get('_height'));\n\n        this._init_image();\n\n        this.on('msg:custom', this.on_comm_message.bind(this));\n        this.on('change:resizable', () => {\n            this._for_each_view((view: MPLCanvasView) => {\n                view.update_canvas();\n            });\n        });\n        this.on('comm_live_update', this.update_disabled.bind(this));\n\n        this.update_disabled();\n\n        this.send_initialization_message();\n    }\n\n    get disabled(): boolean {\n        return !this.comm_live;\n    }\n\n    update_disabled(): void {\n        this.set('resizable', !this.disabled);\n    }\n\n    sync(method: string, model: WidgetModel, options: any = {}) {\n        // Make sure we don't sync the data_url, we don't need it to be synced\n        if (options.attrs) {\n            delete options.attrs['_data_url'];\n        }\n\n        super.sync(method, model, options);\n    }\n\n    send_message(type: string, message: { [index: string]: any } = {}) {\n        message['type'] = type;\n\n        this.send(message, {});\n    }\n\n    send_initialization_message() {\n        if (this.ratio !== 1) {\n            this.send_message('set_dpi_ratio', { dpi_ratio: this.ratio });\n            this.send_message('set_device_pixel_ratio', {\n                device_pixel_ratio: this.ratio,\n            });\n        }\n\n        this.send_message('refresh');\n        this.send_message('send_image_mode');\n\n        this.send_message('initialized');\n    }\n\n    send_draw_message() {\n        if (!this.waiting_for_image) {\n            this.waiting_for_image = true;\n            this.send_message('draw');\n        }\n    }\n\n    handle_save() {\n        const save = document.createElement('a');\n        save.href = this.offscreen_canvas.toDataURL();\n        save.download = this.get('_figure_label') + '.png';\n        document.body.appendChild(save);\n        save.click();\n        document.body.removeChild(save);\n    }\n\n    handle_resize(msg: { [index: string]: any }) {\n        const size = msg['size'];\n        this.resize_canvas(size[0], size[1]);\n        this.offscreen_context.drawImage(this.image, 0, 0);\n\n        if (!this.resize_requested) {\n            this._for_each_view((view: MPLCanvasView) => {\n                view.resize_canvas(size[0], size[1]);\n            });\n        }\n\n        this.send_message('refresh');\n\n        this.resize_requested = false;\n        if (this.requested_size !== null) {\n            // Requesting saved resize\n            this.resize(this.requested_size[0], this.requested_size[1]);\n            this.requested_size = null;\n        }\n    }\n\n    resize(width: number, height: number) {\n        // Do not request a super small size, as it seems to break the back-end\n        if (width <= 5 || height <= 5) {\n            return;\n        }\n\n        this._for_each_view((view: MPLCanvasView) => {\n            // Do an initial resize of each view, stretching the old canvas.\n            view.resize_canvas(width, height);\n        });\n\n        if (this.resize_requested) {\n            // If a resize was already requested, save the requested size for later\n            this.requested_size = [width, height];\n        } else {\n            this.resize_requested = true;\n            this.send_message('resize', { width: width, height: height });\n        }\n    }\n\n    resize_canvas(width: number, height: number) {\n        this.offscreen_canvas.width = width * this.ratio;\n        this.offscreen_canvas.height = height * this.ratio;\n    }\n\n    handle_rubberband(msg: any) {\n        let x0 = msg['x0'] / this.ratio;\n        let y0 = (this.offscreen_canvas.height - msg['y0']) / this.ratio;\n        let x1 = msg['x1'] / this.ratio;\n        let y1 = (this.offscreen_canvas.height - msg['y1']) / this.ratio;\n        x0 = Math.floor(x0) + 0.5;\n        y0 = Math.floor(y0) + 0.5;\n        x1 = Math.floor(x1) + 0.5;\n        y1 = Math.floor(y1) + 0.5;\n\n        this.set('_rubberband_x', Math.min(x0, x1));\n        this.set('_rubberband_y', Math.min(y0, y1));\n        this.set('_rubberband_width', Math.abs(x1 - x0));\n        this.set('_rubberband_height', Math.abs(y1 - y0));\n        this.save_changes();\n\n        this._for_each_view((view: MPLCanvasView) => {\n            view.update_canvas();\n        });\n    }\n\n    handle_draw(_msg: any) {\n        // Request the server to send over a new figure.\n        this.send_draw_message();\n    }\n\n    handle_binary(msg: any, dataviews: any) {\n        const url_creator = window.URL || window.webkitURL;\n\n        const buffer = new Uint8Array(dataviews[0].buffer);\n        const blob = new Blob([buffer], { type: 'image/png' });\n        const image_url = url_creator.createObjectURL(blob);\n\n        // Free the memory for the previous frames\n        if (this.image.src) {\n            url_creator.revokeObjectURL(this.image.src);\n        }\n\n        this.image.src = image_url;\n\n        this.set('_data_url', this.offscreen_canvas.toDataURL());\n\n        this.waiting_for_image = false;\n    }\n\n    handle_history_buttons(msg: any) {\n        // No-op\n    }\n\n    handle_navigate_mode(msg: any) {\n        // TODO: Remove _current_action property in the toolbar and use\n        // this message instead to know which is the current mode/which\n        // button to toggle?\n    }\n\n    on_comm_message(evt: any, dataviews: any) {\n        const msg = JSON.parse(evt.data);\n        const msg_type = msg['type'];\n        let callback;\n\n        // Call the  'handle_{type}' callback, which takes\n        // the figure and JSON message as its only arguments.\n        try {\n            callback = (this as any)['handle_' + msg_type].bind(this);\n        } catch (e) {\n            console.log(\n                \"No handler for the '\" + msg_type + \"' message type: \",\n                msg\n            );\n            return;\n        }\n\n        if (callback) {\n            callback(msg, dataviews);\n        }\n    }\n\n    _init_image() {\n        this.image = new Image();\n\n        this.image.onload = () => {\n            if (this.get('_image_mode') === 'full') {\n                // Full images could contain transparency (where diff images\n                // almost always do), so we need to clear the canvas so that\n                // there is no ghosting.\n                this.offscreen_context.clearRect(\n                    0,\n                    0,\n                    this.offscreen_canvas.width,\n                    this.offscreen_canvas.height\n                );\n            }\n            this.offscreen_context.drawImage(this.image, 0, 0);\n\n            this._for_each_view((view: MPLCanvasView) => {\n                view.update_canvas();\n            });\n        };\n\n        const dataUrl = this.get('_data_url');\n\n        if (dataUrl !== null) {\n            this.image.src = dataUrl;\n        }\n    }\n\n    _for_each_view(callback: any) {\n        for (const view_id in this.views) {\n            this.views[view_id].then((view) => {\n                callback(view);\n            });\n        }\n    }\n\n    remove() {\n        this.send_message('closing');\n    }\n}\n\nexport class MPLCanvasView extends DOMWidgetView {\n    figure: HTMLDivElement;\n    canvas_div: HTMLDivElement;\n    canvas: HTMLCanvasElement;\n    header: HTMLDivElement;\n    toolbar_view: DOMWidgetView;\n    resize_handle_size: number;\n    resizing: boolean;\n    context: CanvasRenderingContext2D;\n    top_canvas: HTMLCanvasElement;\n    top_context: CanvasRenderingContext2D;\n    footer: HTMLDivElement;\n    model: MPLCanvasModel;\n    private _key: string | null;\n    private _resize_event: (event: MouseEvent) => void;\n    private _stop_resize_event: () => void;\n\n    render() {\n        this.resizing = false;\n        this.resize_handle_size = 20;\n\n        this.figure = document.createElement('div');\n        this.figure.classList.add(\n            'jupyter-matplotlib-figure',\n            'jupyter-widgets',\n            'widget-container',\n            'widget-box',\n            'widget-vbox'\n        );\n\n        this._init_header();\n        this._init_canvas();\n        this._init_footer();\n\n        this._resize_event = this.resize_event.bind(this);\n        this._stop_resize_event = this.stop_resize_event.bind(this);\n        window.addEventListener('mousemove', this._resize_event);\n        window.addEventListener('mouseup', this._stop_resize_event);\n\n        return this.create_child_view(this.model.get('toolbar')).then(\n            (toolbar_view) => {\n                this.toolbar_view = toolbar_view;\n\n                this._update_toolbar_position();\n\n                this._update_header_visible();\n                this._update_footer_visible();\n                this._update_toolbar_visible();\n\n                this.model_events();\n            }\n        );\n    }\n\n    model_events() {\n        this.model.on(\n            'change:header_visible',\n            this._update_header_visible.bind(this)\n        );\n        this.model.on(\n            'change:footer_visible',\n            this._update_footer_visible.bind(this)\n        );\n        this.model.on(\n            'change:toolbar_visible',\n            this._update_toolbar_visible.bind(this)\n        );\n        this.model.on(\n            'change:toolbar_position',\n            this._update_toolbar_position.bind(this)\n        );\n        this.model.on(\n            'change:_figure_label',\n            this._update_figure_label.bind(this)\n        );\n        this.model.on('change:_message', this._update_message.bind(this));\n        this.model.on('change:_cursor', this._update_cursor.bind(this));\n    }\n\n    _update_header_visible() {\n        this.header.style.display = this.model.get('header_visible')\n            ? ''\n            : 'none';\n    }\n\n    _update_footer_visible() {\n        this.footer.style.display = this.model.get('footer_visible')\n            ? ''\n            : 'none';\n    }\n\n    _update_toolbar_visible() {\n        this.toolbar_view.el.style.display = this.model.get('toolbar_visible')\n            ? ''\n            : 'none';\n    }\n\n    _update_toolbar_position() {\n        const toolbar_position = this.model.get('toolbar_position');\n        if (toolbar_position === 'top' || toolbar_position === 'bottom') {\n            this.el.classList.add(\n                'jupyter-widgets',\n                'widget-container',\n                'widget-box',\n                'widget-vbox',\n                'jupyter-matplotlib'\n            );\n            this.model.get('toolbar').set('orientation', 'horizontal');\n\n            this.clear();\n\n            if (toolbar_position === 'top') {\n                this.el.appendChild(this.toolbar_view.el);\n                this.el.appendChild(this.figure);\n            } else {\n                this.el.appendChild(this.figure);\n                this.el.appendChild(this.toolbar_view.el);\n            }\n        } else {\n            this.el.classList.add(\n                'jupyter-widgets',\n                'widget-container',\n                'widget-box',\n                'widget-hbox',\n                'jupyter-matplotlib'\n            );\n            this.model.get('toolbar').set('orientation', 'vertical');\n\n            this.clear();\n\n            if (toolbar_position === 'left') {\n                this.el.appendChild(this.toolbar_view.el);\n                this.el.appendChild(this.figure);\n            } else {\n                this.el.appendChild(this.figure);\n                this.el.appendChild(this.toolbar_view.el);\n            }\n        }\n    }\n\n    clear() {\n        while (this.el.firstChild) {\n            this.el.removeChild(this.el.firstChild);\n        }\n    }\n\n    _init_header() {\n        this.header = document.createElement('div');\n        this.header.style.textAlign = 'center';\n        this.header.classList.add('jupyter-widgets', 'widget-label');\n        this._update_figure_label();\n        this.figure.appendChild(this.header);\n    }\n\n    _update_figure_label() {\n        this.header.textContent = this.model.get('_figure_label');\n    }\n\n    _init_canvas() {\n        const canvas_container = document.createElement('div');\n        canvas_container.classList.add(\n            'jupyter-widgets',\n            'jupyter-matplotlib-canvas-container'\n        );\n        this.figure.appendChild(canvas_container);\n\n        const canvas_div = (this.canvas_div = document.createElement('div'));\n        canvas_div.style.position = 'relative';\n        canvas_div.style.clear = 'both';\n        canvas_div.classList.add(\n            'jupyter-widgets',\n            'jupyter-matplotlib-canvas-div'\n        );\n\n        canvas_div.addEventListener('keydown', this.key_event('key_press'));\n        canvas_div.addEventListener('keyup', this.key_event('key_release'));\n\n        // this is important to make the div 'focusable'\n        canvas_div.setAttribute('tabindex', '0');\n        canvas_container.appendChild(canvas_div);\n\n        const canvas = (this.canvas = document.createElement('canvas'));\n        canvas.style.display = 'block';\n        canvas.style.position = 'absolute';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        canvas.style.zIndex = '0';\n\n        this.context = utils.getContext(canvas);\n\n        const top_canvas = (this.top_canvas = document.createElement('canvas'));\n        top_canvas.style.display = 'block';\n        top_canvas.style.position = 'absolute';\n        top_canvas.style.left = '0';\n        top_canvas.style.top = '0';\n        top_canvas.style.zIndex = '1';\n\n        top_canvas.addEventListener(\n            'mousedown',\n            this.mouse_event('button_press')\n        );\n        top_canvas.addEventListener(\n            'mouseup',\n            this.mouse_event('button_release')\n        );\n        top_canvas.addEventListener(\n            'mousemove',\n            this.mouse_event('motion_notify')\n        );\n\n        top_canvas.addEventListener(\n            'mouseenter',\n            this.mouse_event('figure_enter')\n        );\n        top_canvas.addEventListener(\n            'mouseleave',\n            this.mouse_event('figure_leave')\n        );\n\n        top_canvas.addEventListener('wheel', this.mouse_event('scroll'));\n\n        canvas_div.appendChild(canvas);\n        canvas_div.appendChild(top_canvas);\n\n        this.top_context = utils.getContext(top_canvas);\n        this.top_context.strokeStyle = 'rgba(0, 0, 0, 255)';\n\n        // Disable right mouse context menu.\n        this.top_canvas.addEventListener('contextmenu', (_e) => {\n            _e.preventDefault();\n            _e.stopPropagation();\n            return false;\n        });\n\n        this.resize_canvas(this.model.get('_width'), this.model.get('_height'));\n        this.update_canvas();\n    }\n\n    update_canvas() {\n        if (this.canvas.width === 0 || this.canvas.height === 0) {\n            return;\n        }\n\n        this.top_context.save();\n\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.context.drawImage(this.model.offscreen_canvas, 0, 0);\n\n        this.top_context.clearRect(\n            0,\n            0,\n            this.top_canvas.width,\n            this.top_canvas.height\n        );\n\n        // Draw rubberband\n        if (\n            this.model.get('_rubberband_width') !== 0 &&\n            this.model.get('_rubberband_height') !== 0\n        ) {\n            this.top_context.strokeStyle = 'gray';\n            this.top_context.lineWidth = 1;\n            this.top_context.shadowColor = 'black';\n            this.top_context.shadowBlur = 2;\n            this.top_context.shadowOffsetX = 1;\n            this.top_context.shadowOffsetY = 1;\n\n            this.top_context.strokeRect(\n                this.model.get('_rubberband_x'),\n                this.model.get('_rubberband_y'),\n                this.model.get('_rubberband_width'),\n                this.model.get('_rubberband_height')\n            );\n        }\n\n        // Draw resize handle\n        if (this.model.get('resizable')) {\n            const gradient = this.top_context.createLinearGradient(\n                // Start\n                this.top_canvas.width - this.resize_handle_size,\n                this.top_canvas.height - this.resize_handle_size,\n                // Stop\n                this.top_canvas.width,\n                this.top_canvas.height\n            );\n            gradient.addColorStop(0, 'white');\n            gradient.addColorStop(1, 'black');\n\n            this.top_context.fillStyle = gradient;\n            this.top_context.strokeStyle = 'gray';\n\n            this.top_context.globalAlpha = 0.3;\n            this.top_context.beginPath();\n            this.top_context.moveTo(\n                this.top_canvas.width,\n                this.top_canvas.height\n            );\n            this.top_context.lineTo(\n                this.top_canvas.width,\n                this.top_canvas.height - this.resize_handle_size\n            );\n            this.top_context.lineTo(\n                this.top_canvas.width - this.resize_handle_size,\n                this.top_canvas.height\n            );\n            this.top_context.closePath();\n            this.top_context.fill();\n            this.top_context.stroke();\n        }\n\n        this.top_context.restore();\n    }\n\n    _update_cursor() {\n        this.top_canvas.style.cursor = this.model.get('_cursor');\n    }\n\n    _init_footer() {\n        this.footer = document.createElement('div');\n        this.footer.style.textAlign = 'center';\n        this.footer.classList.add('jupyter-widgets', 'widget-label');\n        this._update_message();\n        this.figure.appendChild(this.footer);\n    }\n\n    _update_message() {\n        this.footer.textContent = this.model.get('_message');\n    }\n\n    resize_canvas(width: number, height: number) {\n        // Keep the size of the canvas, and rubber band canvas in sync.\n        this.canvas.setAttribute('width', `${width * this.model.ratio}`);\n        this.canvas.setAttribute('height', `${height * this.model.ratio}`);\n        this.canvas.style.width = width + 'px';\n        this.canvas.style.height = height + 'px';\n\n        this.top_canvas.setAttribute('width', String(width));\n        this.top_canvas.setAttribute('height', String(height));\n\n        this.canvas_div.style.width = width + 'px';\n        this.canvas_div.style.height = height + 'px';\n\n        this.update_canvas();\n    }\n\n    mouse_event(name: string) {\n        let last_update = 0;\n        return (event: any) => {\n            const canvas_pos = utils.get_mouse_position(event, this.top_canvas);\n\n            if (name === 'scroll') {\n                event['data'] = 'scroll';\n                if (event.deltaY < 0) {\n                    event.step = 1;\n                } else {\n                    event.step = -1;\n                }\n                if (this.model.get('capture_scroll')) {\n                    event.preventDefault();\n                }\n            }\n\n            if (name === 'button_press') {\n                // If clicking on the resize handle\n                if (\n                    canvas_pos.x >=\n                        this.top_canvas.width - this.resize_handle_size &&\n                    canvas_pos.y >=\n                        this.top_canvas.height - this.resize_handle_size &&\n                    this.model.get('resizable')\n                ) {\n                    this.resizing = true;\n                    return;\n                } else {\n                    this.canvas.focus();\n                    this.canvas_div.focus();\n                }\n            }\n\n            if (this.resizing) {\n                // Ignore other mouse events while resizing.\n                return;\n            }\n\n            if (name === 'motion_notify') {\n                // If the mouse is on the handle, change the cursor style\n                if (\n                    canvas_pos.x >=\n                        this.top_canvas.width - this.resize_handle_size &&\n                    canvas_pos.y >=\n                        this.top_canvas.height - this.resize_handle_size\n                ) {\n                    this.top_canvas.style.cursor = 'nw-resize';\n                } else {\n                    this.top_canvas.style.cursor = this.model.get('_cursor');\n                }\n            }\n\n            // Rate-limit the position text updates so that we don't overwhelm the\n            // system.\n            if (Date.now() > last_update + 16) {\n                last_update = Date.now();\n\n                const x = canvas_pos.x * this.model.ratio;\n                const y = canvas_pos.y * this.model.ratio;\n\n                this.model.send_message(name, {\n                    x: x,\n                    y: y,\n                    button: event.button,\n                    step: event.step,\n                    guiEvent: utils.get_simple_keys(event),\n                });\n            }\n        };\n    }\n\n    resize_event(event: MouseEvent) {\n        if (this.resizing) {\n            const new_size = utils.get_mouse_position(event, this.top_canvas);\n\n            this.model.resize(new_size.x, new_size.y);\n        }\n    }\n\n    stop_resize_event() {\n        this.resizing = false;\n    }\n\n    key_event(name: string) {\n        return (event: KeyboardEvent) => {\n            event.stopPropagation();\n            event.preventDefault();\n\n            // Prevent repeat events\n            if (name === 'key_press') {\n                if (event.key === this._key) {\n                    return;\n                } else {\n                    this._key = event.key;\n                }\n            }\n            if (name === 'key_release') {\n                this._key = null;\n            }\n\n            let value = '';\n            if (event.ctrlKey && event.key !== 'Control') {\n                value += 'ctrl+';\n            } else if (event.altKey && event.key !== 'Alt') {\n                value += 'alt+';\n            } else if (event.shiftKey && event.key !== 'Shift') {\n                value += 'shift+';\n            }\n\n            value += 'k' + event.key;\n            this.model.send_message(name, {\n                key: value,\n                guiEvent: utils.get_simple_keys(event),\n            });\n            return false;\n        };\n    }\n\n    remove() {\n        window.removeEventListener('mousemove', this._resize_event);\n        window.removeEventListener('mouseup', this._stop_resize_event);\n    }\n}\n","import { DOMWidgetModel, DOMWidgetView } from '@jupyter-widgets/base';\n\nimport { MODULE_VERSION } from './version';\n\nexport class ToolbarModel extends DOMWidgetModel {\n    defaults() {\n        return {\n            ...super.defaults(),\n            _model_name: 'ToolbarModel',\n            _view_name: 'ToolbarView',\n            _model_module: 'jupyter-matplotlib',\n            _view_module: 'jupyter-matplotlib',\n            _model_module_version: '^' + MODULE_VERSION,\n            _view_module_version: '^' + MODULE_VERSION,\n            toolitems: [],\n            orientation: 'vertical',\n            button_style: '',\n            collapsed: true,\n            _current_action: '',\n        };\n    }\n}\n\nexport class ToolbarView extends DOMWidgetView {\n    toggle_button: HTMLButtonElement;\n    toolbar: HTMLDivElement;\n    buttons: { [index: string]: HTMLButtonElement };\n\n    initialize(parameters: any) {\n        super.initialize(parameters);\n\n        this.on('comm_live_update', this.update_disabled.bind(this));\n    }\n\n    render(): void {\n        this.el.classList.add(\n            'jupyter-widgets',\n            'jupyter-matplotlib-toolbar',\n            'widget-container',\n            'widget-box'\n        );\n\n        this.create_toolbar();\n        this.model_events();\n    }\n\n    create_toolbar(): void {\n        const toolbar_items = this.model.get('toolitems');\n\n        this.toggle_button = document.createElement('button');\n\n        this.toggle_button.classList.add(\n            'jupyter-matplotlib-button',\n            'jupyter-widgets',\n            'jupyter-button'\n        );\n        this.toggle_button.setAttribute('href', '#');\n        this.toggle_button.setAttribute('title', 'Toggle Interaction');\n        this.toggle_button.style.outline = 'none';\n        this.toggle_button.addEventListener('click', () => {\n            this.model.set('collapsed', !this.model.get('collapsed'));\n            this.model.save_changes();\n        });\n\n        const icon = document.createElement('i');\n        icon.classList.add('center', 'fa', 'fa-fw', 'fa-bars');\n        this.toggle_button.appendChild(icon);\n\n        this.el.appendChild(this.toggle_button);\n        this.toolbar = document.createElement('div');\n        this.toolbar.classList.add('widget-container', 'widget-box');\n        this.el.appendChild(this.toolbar);\n        this.buttons = { toggle_button: this.toggle_button };\n\n        for (const toolbar_ind in toolbar_items) {\n            const name = toolbar_items[toolbar_ind][0];\n            const tooltip = toolbar_items[toolbar_ind][1];\n            const image = toolbar_items[toolbar_ind][2];\n            const method_name = toolbar_items[toolbar_ind][3];\n            if (!name) {\n                continue;\n            }\n\n            const button = document.createElement('button');\n            button.classList.add(\n                'jupyter-matplotlib-button',\n                'jupyter-widgets',\n                'jupyter-button'\n            );\n            button.setAttribute('href', '#');\n            button.setAttribute('title', tooltip);\n            button.style.outline = 'none';\n            button.addEventListener(\n                'click',\n                this.toolbar_button_onclick(method_name)\n            );\n\n            const icon = document.createElement('i');\n            icon.classList.add('center', 'fa', 'fa-fw', 'fa-' + image);\n            button.appendChild(icon);\n\n            this.buttons[method_name] = button;\n\n            this.toolbar.appendChild(button);\n        }\n\n        this.set_orientation(this.el);\n        this.set_orientation(this.toolbar);\n        this.set_buttons_style();\n\n        this.update_disabled();\n    }\n\n    get disabled(): boolean {\n        return !this.model.comm_live;\n    }\n\n    update_disabled(): void {\n        // Disable buttons\n        this.toggle_button.disabled = this.disabled;\n        if (this.disabled) {\n            this.toolbar.style.display = 'none';\n        }\n    }\n\n    set_orientation(el: HTMLElement): void {\n        const orientation = this.model.get('orientation');\n        if (orientation === 'vertical') {\n            el.classList.remove('widget-hbox');\n            el.classList.add('widget-vbox');\n        } else {\n            el.classList.add('widget-hbox');\n            el.classList.remove('widget-vbox');\n        }\n    }\n\n    toolbar_button_onclick(name: string) {\n        return (_event: Event): void => {\n            // Special case for pan and zoom as they are toggle buttons\n            if (name === 'pan' || name === 'zoom') {\n                if (this.model.get('_current_action') === name) {\n                    this.model.set('_current_action', '');\n                } else {\n                    this.model.set('_current_action', name);\n                }\n                this.model.save_changes();\n            }\n\n            this.send({\n                type: 'toolbar_button',\n                name: name,\n            });\n        };\n    }\n\n    set_buttons_style(): void {\n        const class_map: { [index: string]: any } = {\n            primary: ['mod-primary'],\n            success: ['mod-success'],\n            info: ['mod-info'],\n            warning: ['mod-warning'],\n            danger: ['mod-danger'],\n        };\n\n        for (const name in this.buttons) {\n            const button = this.buttons[name];\n\n            for (const class_name in class_map) {\n                button.classList.remove(class_map[class_name]);\n            }\n            button.classList.remove('mod-active');\n\n            const class_name = this.model.get('button_style');\n            if (class_name !== '') {\n                button.classList.add(class_map[class_name]);\n            }\n\n            if (name === this.model.get('_current_action')) {\n                button.classList.add('mod-active');\n            }\n        }\n    }\n\n    update_collapsed(): void {\n        this.toolbar.style.display = this.model.get('collapsed') ? '' : 'none';\n    }\n\n    model_events(): void {\n        this.model.on('change:orientation', this.update_orientation.bind(this));\n        this.model.on_some_change(\n            ['button_style', '_current_action'],\n            this.set_buttons_style,\n            this\n        );\n        this.model.on('change:collapsed', this.update_collapsed.bind(this));\n    }\n\n    update_orientation(): void {\n        this.set_orientation(this.el);\n        this.set_orientation(this.toolbar);\n    }\n}\n","// Entry point for the notebook bundle containing custom model definitions.\n//\n// Setup notebook base URL\n//\n// Some static assets may be required by the custom widget javascript. The base\n// url for the notebook is not known at build time and is therefore computed\n// dynamically.\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n(window as any).__webpack_public_path__ =\n    document.querySelector('body')!.getAttribute('data-base-url') +\n    'nbextensions/ipympl';\n\nexport * from './index';\n"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE__146__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","get_mouse_position","event","targ","boundingRect","getBoundingClientRect","x","clientX","left","y","clientY","top","get_simple_keys","original","keys","reduce","getContext","canvas","context","data","MODULE_VERSION","version","MODULE_NAME","name","MPLCanvasModel","DOMWidgetModel","defaults","super","_model_name","_view_name","_model_module","_view_module","_model_module_version","_view_module_version","header_visible","footer_visible","toolbar","toolbar_visible","toolbar_position","resizable","capture_scroll","_data_url","_width","_height","_figure_label","_message","_cursor","_image_mode","_rubberband_x","_rubberband_y","_rubberband_width","_rubberband_height","initialize","attributes","options","this","offscreen_canvas","document","createElement","offscreen_context","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","requested_size","resize_requested","ratio","window","devicePixelRatio","resize_canvas","_init_image","on","on_comm_message","bind","_for_each_view","view","update_canvas","update_disabled","send_initialization_message","disabled","comm_live","set","sync","method","model","attrs","send_message","type","message","send","dpi_ratio","device_pixel_ratio","send_draw_message","waiting_for_image","handle_save","save","href","toDataURL","download","body","appendChild","click","removeChild","handle_resize","msg","size","drawImage","image","resize","width","height","handle_rubberband","x0","y0","x1","y1","Math","floor","min","abs","save_changes","handle_draw","_msg","handle_binary","dataviews","url_creator","URL","webkitURL","buffer","Uint8Array","blob","Blob","image_url","createObjectURL","src","revokeObjectURL","handle_history_buttons","handle_navigate_mode","evt","JSON","parse","msg_type","callback","e","console","log","Image","onload","clearRect","dataUrl","view_id","views","then","remove","serializers","deserialize","unpack_models","MPLCanvasView","DOMWidgetView","render","resizing","resize_handle_size","figure","classList","add","_init_header","_init_canvas","_init_footer","_resize_event","resize_event","_stop_resize_event","stop_resize_event","addEventListener","create_child_view","toolbar_view","_update_toolbar_position","_update_header_visible","_update_footer_visible","_update_toolbar_visible","model_events","_update_figure_label","_update_message","_update_cursor","header","style","display","footer","el","clear","firstChild","textAlign","textContent","canvas_container","canvas_div","position","key_event","setAttribute","zIndex","top_canvas","mouse_event","top_context","strokeStyle","_e","preventDefault","stopPropagation","lineWidth","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","strokeRect","gradient","createLinearGradient","addColorStop","fillStyle","globalAlpha","beginPath","moveTo","lineTo","closePath","fill","stroke","restore","cursor","String","last_update","canvas_pos","deltaY","step","focus","Date","now","button","guiEvent","new_size","_key","ctrlKey","altKey","shiftKey","removeEventListener","ToolbarModel","toolitems","orientation","button_style","collapsed","_current_action","ToolbarView","parameters","create_toolbar","toolbar_items","toggle_button","outline","icon","buttons","toolbar_ind","tooltip","method_name","toolbar_button_onclick","set_orientation","set_buttons_style","_event","class_map","primary","success","info","warning","danger","class_name","update_collapsed","update_orientation","on_some_change","__webpack_public_path__","querySelector","getAttribute"],"sourceRoot":""}