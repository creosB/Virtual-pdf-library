(self.webpackChunk_jupyterlab_git=self.webpackChunk_jupyterlab_git||[]).push([[391],{5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},862:(e,t,i)=>{var r=i(8).default;function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,i&&i.set(e,n),n},e.exports.default=e.exports,e.exports.__esModule=!0},8:e=>{function t(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},5996:(e,t,i)=>{"use strict";var r=i(5318),l=i(862);t.Z=void 0;var n=l(i(6271)),s=(0,r(i(2108)).default)(n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=s},2108:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=i(8546)},8715:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var r=i(1253),l=i(2122),n=i(6271),s=(i(5697),i(6010)),o=i(9693),a=i(4670),d=i(9895),u=i(3786);const c=(0,u.Z)(n.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),f=(0,u.Z)(n.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),h=(0,u.Z)(n.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),p=(0,u.Z)(n.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),g=(0,u.Z)(n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var m=i(7812),y=i(3871),D={success:n.createElement(c,{fontSize:"inherit"}),warning:n.createElement(f,{fontSize:"inherit"}),error:n.createElement(h,{fontSize:"inherit"}),info:n.createElement(p,{fontSize:"inherit"})},C=n.createElement(g,{fontSize:"small"}),b=n.forwardRef((function(e,t){var i=e.action,o=e.children,a=e.classes,u=e.className,c=e.closeText,f=void 0===c?"Close":c,h=e.color,p=e.icon,g=e.iconMapping,b=void 0===g?D:g,v=e.onClose,w=e.role,_=void 0===w?"alert":w,M=e.severity,S=void 0===M?"success":M,E=e.variant,O=void 0===E?"standard":E,k=(0,r.Z)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return n.createElement(d.Z,(0,l.Z)({role:_,square:!0,elevation:0,className:(0,s.Z)(a.root,a["".concat(O).concat((0,y.Z)(h||S))],u),ref:t},k),!1!==p?n.createElement("div",{className:a.icon},p||b[S]||D[S]):null,n.createElement("div",{className:a.message},o),null!=i?n.createElement("div",{className:a.action},i):null,null==i&&v?n.createElement("div",{className:a.action},n.createElement(m.Z,{size:"small","aria-label":f,title:f,color:"inherit",onClick:v},C)):null)}));const v=(0,a.Z)((function(e){var t="light"===e.palette.type?o._j:o.$n,i="light"===e.palette.type?o.$n:o._j;return{root:(0,l.Z)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:i(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:i(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:i(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:i(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiAlert"})(b)},7266:(e,t,i)=>{var r="undefined"!=typeof JSON?JSON:i(8418);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var i=t.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var s,o="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},d=t.cmp&&(s=t.cmp,function(e){return function(t,i){var r={key:t,value:e[t]},l={key:i,value:e[i]};return s(r,l)}}),u=[];return function e(t,s,c,f){var h=i?"\n"+new Array(f+1).join(i):"",p=i?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),void 0!==(c=a.call(t,s,c))){if("object"!=typeof c||null===c)return r.stringify(c);if(l(c)){for(var g=[],m=0;m<c.length;m++){var y=e(c,m,c[m],f+1)||r.stringify(null);g.push(h+i+y)}return"["+g.join(",")+h+"]"}if(-1!==u.indexOf(c)){if(o)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(c);var D=n(c).sort(d&&d(c));for(g=[],m=0;m<D.length;m++){var C=e(c,s=D[m],c[s],f+1);if(C){var b=r.stringify(s)+p+C;g.push(h+i+b)}}return u.splice(u.indexOf(c),1),"{"+g.join(",")+h+"}"}}({"":e},"",e,0)};var l=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},n=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var r in e)t.call(e,r)&&i.push(r);return i}},8418:(e,t,i)=>{t.parse=i(1396),t.stringify=i(6177)},1396:e=>{var t,i,r,l,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(e){throw{name:"SyntaxError",message:e,at:t,text:r}},o=function(e){return e&&e!==i&&s("Expected '"+e+"' instead of '"+i+"'"),i=r.charAt(t),t+=1,i},a=function(){var e,t="";for("-"===i&&(t="-",o("-"));i>="0"&&i<="9";)t+=i,o();if("."===i)for(t+=".";o()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,o(),"-"!==i&&"+"!==i||(t+=i,o());i>="0"&&i<="9";)t+=i,o();if(e=+t,isFinite(e))return e;s("Bad number")},d=function(){var e,t,r,l="";if('"'===i)for(;o();){if('"'===i)return o(),l;if("\\"===i)if(o(),"u"===i){for(r=0,t=0;t<4&&(e=parseInt(o(),16),isFinite(e));t+=1)r=16*r+e;l+=String.fromCharCode(r)}else{if("string"!=typeof n[i])break;l+=n[i]}else l+=i}s("Bad string")},u=function(){for(;i&&i<=" ";)o()};l=function(){switch(u(),i){case"{":return function(){var e,t={};if("{"===i){if(o("{"),u(),"}"===i)return o("}"),t;for(;i;){if(e=d(),u(),o(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=l(),u(),"}"===i)return o("}"),t;o(","),u()}}s("Bad object")}();case"[":return function(){var e=[];if("["===i){if(o("["),u(),"]"===i)return o("]"),e;for(;i;){if(e.push(l()),u(),"]"===i)return o("]"),e;o(","),u()}}s("Bad array")}();case'"':return d();case"-":return a();default:return i>="0"&&i<="9"?a():function(){switch(i){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}s("Unexpected '"+i+"'")}()}},e.exports=function(e,n){var o;return r=e,t=0,i=" ",o=l(),u(),i&&s("Syntax error"),"function"==typeof n?function e(t,i){var r,l,s=t[i];if(s&&"object"==typeof s)for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(void 0!==(l=e(s,r))?s[r]=l:delete s[r]);return n.call(t,i,s)}({"":o},""):o}},6177:e=>{var t,i,r,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return l.lastIndex=0,l.test(e)?'"'+e.replace(l,(function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function o(e,l){var n,a,d,u,c,f=t,h=l[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof r&&(h=r.call(l,e,h)),typeof h){case"string":return s(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(t+=i,c=[],"[object Array]"===Object.prototype.toString.apply(h)){for(u=h.length,n=0;n<u;n+=1)c[n]=o(n,h)||"null";return d=0===c.length?"[]":t?"[\n"+t+c.join(",\n"+t)+"\n"+f+"]":"["+c.join(",")+"]",t=f,d}if(r&&"object"==typeof r)for(u=r.length,n=0;n<u;n+=1)"string"==typeof(a=r[n])&&(d=o(a,h))&&c.push(s(a)+(t?": ":":")+d);else for(a in h)Object.prototype.hasOwnProperty.call(h,a)&&(d=o(a,h))&&c.push(s(a)+(t?": ":":")+d);return d=0===c.length?"{}":t?"{\n"+t+c.join(",\n"+t)+"\n"+f+"}":"{"+c.join(",")+"}",t=f,d}}e.exports=function(e,l,n){var s;if(t="",i="","number"==typeof n)for(s=0;s<n;s+=1)i+=" ";else"string"==typeof n&&(i=n);if(r=l,l&&"function"!=typeof l&&("object"!=typeof l||"number"!=typeof l.length))throw new Error("JSON.stringify");return o("",{"":e})}},8892:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitMergeDecisionsOnChunks=void 0;const r=i(4632),l=i(1604),n=i(8439);function s(e){for(let t of e)if(n.hasEntries(t))return!0;return!1}function o(e){let t=[];for(let i of e){let e,r=i.key;t.push(r),"addrange"===i.op||("removerange"===i.op?(e=r+i.length,t.push(e)):"patch"===i.op&&(e=r+1,t.push(e)))}return t.filter(n.unique)}function a(e,t){let i=[];if(!Array.isArray(t))throw new Error;let l=0;for(let s of e)if(n.valueIn(s.op,["addrange","patch"]))i.push(s);else{if("removerange"!==s.op)throw new Error("Unhandled diff entry op "+s.op);for(;t[l]<s.key;)l+=1;if(t[l]!==s.key)throw new Error;for(;l<t.length-1&&t[l+1]<=s.key+s.length;)i.push(r.opRemoveRange(t[l],t[l+1]-t[l])),l+=1}return i}function d(e,t){let i=[0,e.length];for(let e of t)if(n.hasEntries(e)){let t=o(e);i=i.concat(t)}i=i.filter(n.unique).sort();let r=[];for(let e of t)n.hasEntries(e)?r.push(a(e,i)):r.push(e);return function(e,t){let i=Array.apply(null,Array(t.length)).map(Number.prototype.valueOf,0),r=[];for(let l=0;l<e.length;++l){let n=e[l],o=l<e.length-1?e[l+1]:n,a=[];for(let e=0;e<t.length;++e){let r=t[e],l=[];for(;r&&i[e]<r.length&&r[i[e]].key===n;)l.push(r[i[e]]),i[e]+=1;a.push(l)}if(s(a)){let e={baseStart:n,baseEnd:o,diffs:a};r.push(e)}}return r}(i,r)}function u(e,t,i){if(i.length<2)return[t];let r=[];for(let s of i){let i=t.customDiff;n.hasEntries(i)&&(t.localPath.length>0&&(i=l.pushPath(i,t.localPath)),i=a(i,[0,e.length,s.baseStart,s.baseEnd].filter(n.unique).sort())),r.push(new l.MergeDecision(t.absolutePath.slice(),s.diffs[0],s.diffs[1],t.action,t.conflict))}return r}t.splitMergeDecisionsOnChunks=function(e,t){let i=[];for(let r of t){let t=d(e,[l.buildDiffs(e,[r],"local"),l.buildDiffs(e,[r],"remote")]);i=i.concat(u(e,r,t))}return i}},5004:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelSource=t.lineToNormalChunks=t.LineChunker=t.Chunker=t.Chunk=void 0;const r=i(8439);class l{constructor(e,t,i,r,l){this.baseFrom=e,this.baseTo=t,this.remoteFrom=i,this.remoteTo=r,this.sources=l?[l]:[]}inEdit(e){return e>=this.baseFrom&&e<=this.baseTo}inOrig(e){return e>=this.remoteFrom&&e<=this.remoteTo}}t.Chunk=l;class n{constructor(){this._currentGhost=null,this.chunks=[],this.editOffset=0}_getCurrent(){return this._currentGhost?(this._currentGhost=null,null):this.chunks.length>0?this.chunks[this.chunks.length-1]:null}_overlapChunk(e,t,i){return i?e.inOrig(t.from.line):e.inEdit(t.from.line)}addDiff(e,t){let i=e.to.line-e.from.line;e.endsOnNewline&&(i+=1);const n=0===e.from.ch&&i>0,s=e.chunkStartLine?0:1,o=e.chunkStartLine&&e.endsOnNewline&&n?0:1;let a=this._getCurrent();if(a&&(t?this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+o+i),a.baseTo=Math.max(a.baseTo,e.from.line+o+this.editOffset),e.source&&!r.valueIn(e.source,a.sources)&&a.sources.push(e.source)):a=null:this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+o-this.editOffset),a.baseTo=Math.max(a.baseTo,e.from.line+o+i),e.source&&!r.valueIn(e.source,a.sources)&&a.sources.push(e.source)):a=null),!a){if(t){let t=e.from.line,r=t+this.editOffset;a=new l(r+s,r+o,t+s,t+o+i)}else{let t=e.from.line,r=t-this.editOffset;a=new l(t+s,t+o+i,r+s,r+o)}e.source&&a.sources.push(e.source),this.chunks.push(a)}a.sources=a.sources.filter(r.unique),this.editOffset+=t?-i:i}addGhost(e,t,i){let n=e.to.line-e.from.line;e.endsOnNewline&&(n+=1);let s=0===e.from.ch&&n>0,o=e.chunkStartLine?0:1,a=e.chunkStartLine&&e.endsOnNewline&&s?0:1;t||(a+=n);let d=this._currentGhost,u=e.from.line+(t?i:0);if(d){let t=u-this.editOffset;d.baseTo>u?(d.remoteTo=Math.max(d.remoteTo,t+a),d.baseTo=Math.max(d.baseTo,u+a),e.source&&!r.valueIn(e.source,d.sources)&&d.sources.push(e.source)):d=null}if(!d){let t=u-this.editOffset;d=new l(u+o,u+a,t+o,t+a),e.source&&d.sources.push(e.source),this.chunks.push(d)}this._currentGhost=d,d.sources=d.sources.filter(r.unique)}}t.Chunker=n,t.LineChunker=class extends n{_overlapChunk(e,t,i){let r=t.from.line;return(e.baseFrom!==e.baseTo||e.remoteFrom>=e.remoteTo)&&(r+=1),i?e.inOrig(r):e.inEdit(r)}},t.lineToNormalChunks=function(e){let t=null,i=[];for(let l of e)null===t?t=r.shallowCopy(l):t.inEdit(l.baseFrom)?(t.remoteTo=Math.max(t.remoteTo,l.remoteTo),t.baseTo=Math.max(t.baseTo,l.baseTo),t.sources=t.sources.concat(l.sources)):(i.push(t),t=r.shallowCopy(l)),t.sources=t.sources.filter(r.unique);return null!==t&&i.push(t),i},t.labelSource=function e(t,i){if(t)for(let r of t)r.source=i,"patch"===r.op&&e(r.diff,i);return t}},8049:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),l=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),l(i(5004),t),l(i(8892),t)},3788:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollapsiblePanel=void 0;const r=i(3706),l="jp-CollapsiblePanel-header-icon",n="jp-CollapsiblePanel-header-icon-opened",s="jp-CollapsiblePanel-header-icon-closed",o="jp-CollapsiblePanel-opened",a="jp-CollapsiblePanel-closed";class d extends r.Panel{constructor(e,t,i){super(),this.addClass("jp-CollapsiblePanel"),this.inner=e;let d=this.constructor.createHeader(t);this.header=d,this.button=d.node.getElementsByClassName(l)[0],d.node.onclick=this.toggleCollapsed.bind(this),this.addWidget(d),this.container=new r.Panel,this.container.addClass("jp-CollapsiblePanel-container"),this.slider=new r.Panel,this.slider.addClass("jp-CollapsiblePanel-slider"),this.slider.addWidget(e),this.container.addWidget(this.slider),this.addWidget(this.container),this.slider.addClass(!0===i?a:o),this.button.classList.add(!0===i?s:n),this.button.classList.add("fa"),this.button.classList.add(!0===i?"fa-caret-down":"fa-caret-up")}static createHeader(e){let t=new r.Panel;t.addClass("jp-CollapsiblePanel-header"),e&&(t.node.innerText=e);let i=document.createElement("button");return i.className=l,t.node.appendChild(i),t}toggleCollapsed(){let e=this.slider,t=this.button;this.collapsed?(e.removeClass(a),e.addClass(o),t.classList.remove(s),t.classList.add(n),this.button.classList.remove("fa-caret-down"),this.button.classList.add("fa-caret-up")):(e.removeClass(o),e.addClass(a),t.classList.remove(n),t.classList.add(s),this.button.classList.remove("fa-caret-up"),this.button.classList.add("fa-caret-down"))}get collapsed(){return this.slider.hasClass(a)}set headerTitle(e){this.header.node.innerText=e}}t.CollapsiblePanel=d},3642:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FriendlyDragDrop=t.DragDropPanel=t.DragPanel=t.DragDropPanelBase=t.DropPanel=t.findChild=t.belongsToUs=t.MIME_INDEX=void 0;const r=i(3706),l=i(1797),n=i(1513),s="jp-DropPanel",o="jp-DragPanel",a="jp-mod-dragHandle",d="jp-mod-dropTarget";function u(e,t,i){let r=e;for(;r&&!r.classList.contains(t);)r=r.parentElement;return!!r&&r===i}function c(e,t){let i=null,r=Array.isArray(e),l=t=>r?e.indexOf(t)>-1:t.parentElement===e,n=t;for(;n&&n!==e;){if(l(n)){i=n;break}n=n.parentElement}return i}t.MIME_INDEX="application/vnd.jupyter.dragindex",t.belongsToUs=u,t.findChild=c;class f extends r.Panel{constructor(e={}){super(e),this.acceptDropsFromExternalSource=!0===e.acceptDropsFromExternalSource,this.addClass(s)}handleEvent(e){switch(e.type){case"p-dragenter":this._evtDragEnter(e);break;case"p-dragleave":this._evtDragLeave(e);break;case"p-dragover":this._evtDragOver(e);break;case"p-drop":this.evtDrop(e)}}validateSource(e){return this.acceptDropsFromExternalSource||e.source===this}findDropTarget(e,i){return i.hasData(t.MIME_INDEX)?c(this.node,e):null}evtDrop(e){let t=e.target;for(;t&&t.parentElement;){if(t.classList.contains(d)){t.classList.remove(d);break}t=t.parentElement}if(t&&u(t,s,this.node))return this.validateSource(e)?void this.processDrop(t,e):(e.dropAction="none",e.preventDefault(),void e.stopPropagation())}onAfterAttach(e){let t=this.node;t.addEventListener("p-dragenter",this),t.addEventListener("p-dragleave",this),t.addEventListener("p-dragover",this),t.addEventListener("p-drop",this)}onBeforeDetach(e){let t=this.node;t.removeEventListener("p-dragenter",this),t.removeEventListener("p-dragleave",this),t.removeEventListener("p-dragover",this),t.removeEventListener("p-drop",this)}_evtDragEnter(e){if(!this.validateSource(e))return;let t=this.findDropTarget(e.target,e.mimeData);null!==t&&(this._clearDropTarget(),t.classList.add(d),e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),e.stopPropagation(),this._clearDropTarget()}_evtDragOver(e){if(!this.validateSource(e))return;this._clearDropTarget();let t=this.findDropTarget(e.target,e.mimeData);null!==t&&(t.classList.add(d),e.preventDefault(),e.stopPropagation(),e.dropAction=e.proposedAction)}_clearDropTarget(){let e=this.node.getElementsByClassName(d);e.length&&e[0].classList.remove(d)}}t.DropPanel=f;class h extends f{constructor(e={}){super(e),this.drag=null,this.dragHandleClass=a,this._clickData=null,this.childrenAreDragHandles=!0===e.childrenAreDragHandles,this.addClass(o)}dispose(){this.drag=null,this._clickData=null,super.dispose()}handleEvent(e){switch(e.type){case"mousedown":this._evtDragMousedown(e);break;case"mouseup":this._evtDragMouseup(e);break;case"mousemove":this._evtDragMousemove(e);break;default:super.handleEvent(e)}}findDragTarget(e){return c(this.node,e)}getDragImage(e){let t=this.findDragTarget(e);return t?t.cloneNode(!0):null}onDragComplete(e){this.drag=null}onAfterAttach(e){this.node.addEventListener("mousedown",this),super.onAfterAttach(e)}onBeforeDetach(e){let t=this.node;t.removeEventListener("click",this),t.removeEventListener("dblclick",this),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),super.onBeforeDetach(e)}startDrag(e,t,i){let r=this.getDragImage(e);this.drag=new n.Drag({dragImage:r||void 0,mimeData:new l.MimeData,supportedActions:"all",proposedAction:"copy",source:this}),this.addMimeData(e,this.drag.mimeData),this.drag.start(t,i).then(this.onDragComplete.bind(this)),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0)}_findDragHandle(e){let t=null;if(this.childrenAreDragHandles)u(e,o,this.node)&&(t=e);else{let i=e;for(;i&&i!==this.node;){if(i.classList.contains(this.dragHandleClass)){t=i;break}i=i.parentElement}null===t||u(t,o,this.node)||(t=null)}return t}_evtDragMousedown(e){let t=e.target,i=this._findDragHandle(t);null!==i&&0===e.button&&(this._clickData={pressX:e.clientX,pressY:e.clientY,handle:i},document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),e.preventDefault())}_evtDragMouseup(e){if(0!==e.button||!this.drag)return document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),void(this.drag=null);e.preventDefault(),e.stopPropagation()}_evtDragMousemove(e){if(this.drag)return;e.preventDefault(),e.stopPropagation();let t=this._clickData;if(!t)throw new Error("Missing drag data");let i=Math.abs(e.clientX-t.pressX),r=Math.abs(e.clientY-t.pressY);i<5&&r<5||(this.startDrag(t.handle,e.clientX,e.clientY),this._clickData=null)}}t.DragDropPanelBase=h;class p extends h{constructor(e={}){super(e)}processDrop(e,t){}findDropTarget(e,t){return null}}t.DragPanel=p;class g extends h{move(e,t){t!==e&&(t>e&&(t-=1),this.insertWidget(t,this.widgets[e]))}getIndexOfChildNode(e,t){t=t||this.layout;for(let i=0;i<t.widgets.length;i++)if(t.widgets[i].node===e)return i;return null}addMimeData(e,i){let r=this.findDragTarget(e),l=this.getIndexOfChildNode(r);null!==l&&i.setData(t.MIME_INDEX,l)}processDrop(e,i){if(!f.isValidAction(i.supportedActions,"move")||"none"===i.proposedAction)return i.dropAction="none",i.preventDefault(),void i.stopPropagation();if(!this.validateSource(i))throw new Error("Invalid source!");let r=i.mimeData.getData(t.MIME_INDEX),l=this.getIndexOfChildNode(e);null!==l&&(this.move(r,l),i.preventDefault(),i.stopPropagation(),i.dropAction="move")}}t.DragDropPanel=g,function(e){e.isValidAction=function(e,t){switch(e){case"all":return!0;case"link-move":return"move"===t||"link"===t;case"copy-move":return"move"===t||"copy"===t;case"copy-link":return"link"===t||"copy"===t;default:return t===e}}}(f=t.DropPanel||(t.DropPanel={})),function(e){function t(e){e.addClass(a)}e.makeHandle=t,e.unmakeHandle=function(e){e.removeClass(a)},e.createDefaultHandle=function(){let e=new r.Widget;return e.addClass("jp-DragPanel-dragHandle"),t(e),e}}(p=t.DragPanel||(t.DragPanel={}));class m extends g{static makeGroup(){const e=this._counter++;return m._groups[e]=[],e}setFriendlyGroup(e){this._groupId=e,m._groups[e].push(this)}addToFriendlyGroup(e){e.setFriendlyGroup(this._groupId)}get friends(){if(void 0===this._groupId)throw new Error("Uninitialized drag-drop group");return m._groups[this._groupId]}getIndexOfChildNode(e,t){const i=this.friends;for(let t of i){if(!u(e,s,t.node))continue;let i=c(t.node,e);if(null!==i)return[t.friends.indexOf(t),super.getIndexOfChildNode(i,t.layout)]}return null}validateSource(e){return this.acceptDropsFromExternalSource?-1!==this.friends.indexOf(e.source):super.validateSource(e)}}t.FriendlyDragDrop=m,m._counter=0,m._groups={}},4291:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorWidget=void 0;const r=i(7012),l=i(8248);class n extends r.CodeEditorWrapper{constructor(e,t){t&&t.readOnly&&(t.extraKeys={Tab:!1,"Shift-Tab":!1}),super({model:new r.CodeEditor.Model({value:e}),factory:function(){let e=new l.CodeMirrorEditorFactory(t);return e.newInlineEditor.bind(e)}()}),this.staticLoaded=!1,n.editors.push(this.cm)}get cm(){return this.editor.editor}get doc(){return this.editor.doc}onResize(e){this.staticLoaded||(e.width<0||e.height<0?this.cm.setSize(null,null):super.onResize(e),this.editor.getOption("readOnly")&&document.contains(this.node)&&(this.staticLoaded=!0))}}t.EditorWidget=n,n.editors=[]},1156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyUserError=void 0;class i extends Error{constructor(e,t="error"){super(e),Object.setPrototypeOf(this,i.prototype),this.message=e,this.stack=(new Error).stack,this.severity=t}}t.NotifyUserError=i},111:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergeView=t.DiffView=t.createNbdimeMergeView=t.EventDirection=t.DIFF_OP=void 0;const r=i(8681),l=i(3706),n=i(5118),s=i(8049),o=i(4291),a=i(8439),d=i(1156);var u,c;!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(u=t.DIFF_OP||(t.DIFF_OP={})),function(e){e[e.INCOMING=0]="INCOMING",e[e.OUTGOING=1]="OUTGOING"}(c=t.EventDirection||(t.EventDirection={}));const f="jp-Merge-gutter-picker",h="jp-Merge-gutter-conflict",p="jp-Merge-conflict",g={chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect",gutter:"CodeMirror-merge-l-gutter"},m={chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect",gutter:"CodeMirror-merge-r-gutter"},y={chunk:"CodeMirror-merge-m-chunk",start:"CodeMirror-merge-m-chunk-start",end:"CodeMirror-merge-m-chunk-end",insert:"CodeMirror-merge-m-inserted",del:"CodeMirror-merge-m-deleted",connect:"CodeMirror-merge-m-connect",gutter:"CodeMirror-merge-m-gutter"};t.createNbdimeMergeView=function(e,t,i,r){let l=new S({remote:e,local:t,merged:i,readOnly:r,orig:null,collapseIdentical:!0}),n=[];l.left&&n.push(l.left),l.right&&n.push(l.right),l.merge&&n.push(l.merge);let s=(e||i).mimetype;if(s){for(let e of n)e.ownWidget.model.mimeType=s;l.base.model.mimeType=s}return l};class D{constructor(e,t,i,r){this.collapsedRanges=[],this.model=e,this.type=t,this.updateCallback=i,this.classes="left"===t?g:"right"===t?m:null;let l=this.model.remote||"";this.ownWidget=new o.EditorWidget(l,a.copyObj({readOnly:!!r.readOnly},r)),this.showDifferences=!1!==r.showDifferences}init(e){this.baseEditor=e,(this.baseEditor.state.diffViews||(this.baseEditor.state.diffViews=[])).push(this),this.ownEditor.state.diffViews=[this],this.baseEditor.on("gutterClick",this.onGutterClick.bind(this)),this.ownEditor.on("gutterClick",this.onGutterClick.bind(this)),this.lineChunks=this.model.getLineChunks(),this.chunks=s.lineToNormalChunks(this.lineChunks),this.dealigned=!1,this.forceUpdate=this.registerUpdate(),this.setScrollLock(!0,!1),this.registerScroll()}setShowDifferences(e){(e=!1!==e)!==this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}syncModel(){if(this.modelInvalid()){let e=this.ownEditor,t=this.model.getLineChunks(),i=s.lineToNormalChunks(t);if(this.model.remote===e.getValue())return this.lineChunks=t,void(this.chunks=i);let l,n,o=e.getDoc().getCursor(),d=a.splitLines(this.model.remote),u=e.getDoc().firstLine(),c=e.getDoc().lastLine()+1,f=0;for(let t of this.collapsedRanges){let s=t.line;l=v(s,this.chunks),n=v(s,i);let o=n-l;l===u&&0===o||e.getDoc().replaceRange(d.slice(u+f,n+f-1).join(""),r.Pos(u,0),r.Pos(l-1,0),"syncModel"),f+=o,u=l+t.size}u<c&&e.getDoc().replaceRange(d.slice(u,d.length).join(""),r.Pos(u,0),r.Pos(c,0),"syncModel"),this.ownEditor.getDoc().setCursor(o),this.lineChunks=t,this.chunks=i}}buildGap(){let e=this.lockButton=P("div",void 0,"CodeMirror-merge-scrolllock");e.title="Toggle locked scrolling";let t=P("div",[e],"CodeMirror-merge-scrolllock-wrap"),i=this;return r.on(e,"click",(function(){i.setScrollLock(!i.lockScroll)})),this.gap=P("div",[t],"CodeMirror-merge-gap")}setScrollLock(e,t){this.lockScroll=e,e&&!1!==t&&this.syncScroll(c.OUTGOING),this.lockButton&&(this.lockButton.innerHTML=e?"⇛⇚":"⇛&nbsp;&nbsp;⇚")}registerUpdate(){let e,t=[],i=[],r=this;function l(e){r.updating=!0,r.updatingFast=!1,"full"===e&&(r.syncModel(),null===r.classes?(C(r.baseEditor,t),C(r.ownEditor,i)):(b(r.baseEditor,t,r.classes),b(r.ownEditor,i,r.classes))),r.showDifferences&&(r.updateMarks(r.ownEditor,r.model.additions,t,u.DIFF_INSERT),r.updateMarks(r.baseEditor,r.model.deletions,i,u.DIFF_DELETE)),r.updateCallback(!0),function(e){if(r.model.remote!==e.getValue())throw new d.NotifyUserError("CRITICAL: Merge editor out of sync with model! Double-check any saved merge output!")}(r.ownEditor),r.updating=!1}function o(e){let t=!1;for(let e of r.baseEditor.state.diffViews)t=t||e.updating;t||(r.dealigned=!0,a(!0===e))}function a(t){let i=!1;for(let e of r.baseEditor.state.diffViews)i=i||e.updating||e.updatingFast;i||(clearTimeout(e),!0===t&&(r.updatingFast=!0),e=window.setTimeout(l,!0===t?20:250))}function c(e,t){r.model instanceof n.DecisionStringDiffModel||(r.lineChunks=r.model.getLineChunks(),r.chunks=s.lineToNormalChunks(r.lineChunks)),o(t.text.length-1!=t.to.line-t.from.line)}return r.updating=!1,r.updatingFast=!1,this.baseEditor.on("change",c),this.ownEditor.on("change",c),this.baseEditor.on("markerAdded",o),this.baseEditor.on("markerCleared",o),this.ownEditor.on("markerAdded",o),this.ownEditor.on("markerCleared",o),this.baseEditor.on("viewportChange",(function(){a(!1)})),this.ownEditor.on("viewportChange",(function(){a(!1)})),l(),l}modelInvalid(){return this.model instanceof n.DecisionStringDiffModel&&this.model.invalid}onGutterClick(e,t,i,r){if(0!==r.button)return;let l=e.lineInfo(t);if(!l.gutterMarkers||!l.gutterMarkers.hasOwnProperty(i))return;let s=l.gutterMarkers[i];if(s&&s.sources){let r=s.sources;if(i===f){if(e===this.ownEditor)for(let e of r)e.decision.action=e.action;else if("merge"===this.type&&e===this.baseEditor)for(let e of r)e.decision.action="base";for(let e=r.length-1;e>=0;--e){let t=r[e];"merge"===this.type&&a.hasEntries(t.decision.customDiff)&&(t.decision.customDiff=[])}0===r.length&&e.setGutterMarker(t,f,null)}else if(i===h)for(let e of r)e.decision.conflict=!1;for(let e of this.baseEditor.state.diffViews)e.model instanceof n.DecisionStringDiffModel&&e.model.invalidate(),e.forceUpdate("full")}}registerScroll(){let e=this;this.baseEditor.on("scroll",(function(){e.syncScroll(c.OUTGOING)})),this.ownEditor.on("scroll",(function(){e.syncScroll(c.INCOMING)}))}syncScroll(e){if(this.modelInvalid())return;if(!this.lockScroll)return;let t,i;if(e===c.OUTGOING?(t=this.baseEditor,i=this.ownEditor):(t=this.ownEditor,i=this.baseEditor),t.state.scrollSetBy===this)return void(t.state.scrollSetBy=null);if(i.state.scrollPosition=t.getScrollInfo(),i.state.scrollTicking)return;let r=i.getScrollInfo();if(i.state.scrollPosition.top===r.top&&i.state.scrollPosition.left===r.left)return;let l=this;window.requestAnimationFrame((function(){i.scrollTo(i.state.scrollPosition.left,i.state.scrollPosition.top),i.state.scrollTicking=!1,i.state.scrollSetBy=l})),i.state.scrollTicking=!0}updateMarks(e,t,i,r){let l;l=null===this.classes?a.copyObj(y):this.classes;let n=this;function s(e,t,r,s){if(null===n.classes&&s.length>0){l=a.copyObj(y);let e=s[0].action;if(s.length>1)for(let t of s.slice(1))if(t.action!==e){e="mixed";break}for(let t of Object.keys(l))l[t]+="-"+e}let o=!1;if(s.length>0)for(let e of s)if(e.decision.conflict){o=!0;break}for(let d=t;d<r;++d){let u=e.addLineClass(d,"background",l.chunk);if(o&&e.addLineClass(u,"background",p),d===t)if(e.addLineClass(u,"background",l.start),"merge"!==n.type){let t=P("div","➭",l.gutter);t.sources=s,t.classList.add(f),e.setGutterMarker(u,f,t)}else if(e===n.baseEditor){for(let t of s)if("custom"===t.decision.action&&!a.hasEntries(t.decision.localDiff)&&!a.hasEntries(t.decision.remoteDiff)){let t=P("div","➭",l.gutter);t.sources=s,t.classList.add(f),e.setGutterMarker(u,f,t)}}else if(o&&e===n.ownEditor){let t=P("div","⚠","");t.sources=s,t.classList.add(h),e.setGutterMarker(u,h,t)}d===r-1&&e.addLineClass(u,"background",l.end),i.push(u)}if(t===r){let r=e.addLineClass(t,"background",l.start);if("merge"!==n.type){let t=P("div","➭",l.gutter);t.sources=s,t.classList.add(f),e.setGutterMarker(r,f,t)}else if(o){let t=P("div","⚠","");t.sources=s,t.classList.add(h),e.setGutterMarker(r,h,t)}e.addLineClass(r,"background",l.end+"-empty"),i.push(r)}}let o=r===u.DIFF_DELETE?l.del:l.insert;e.operation((function(){let r=e===n.baseEditor;n.classes?b(e,i,l):C(e,i),function(e,t,i,r){let l=e.getDoc(),n=null;a.valueIn(r,[y.del,y.insert])&&(n=r);for(let e of t)null!==n&&(r=n+(e.source?"-"+e.source.action:"")),i.push(l.markText(e.from,e.to,{className:r}))}(e,t,i,o);for(let t of n.chunks)r?s(e,t.baseFrom,t.baseTo,t.sources):s(e,t.remoteFrom,t.remoteTo,t.sources)}))}get ownEditor(){return this.ownWidget.cm}}function C(e,t){for(let i of["-local","-remote","-either","-custom"]){let r=a.copyObj(y);for(let e of Object.keys(r))r[e]+=i;b(e,t,r)}}function b(e,t,i){for(let r=t.length-1;r>=0;--r){let l=t[r];if("clear"in l)l.clear(),t.splice(r,1);else if(l.parent){e.removeLineClass(l,"background",i.chunk),e.removeLineClass(l,"background",i.start),e.removeLineClass(l,"background",i.end),e.removeLineClass(l,"background",p),a.valueIn(i.gutter,[g.gutter,m.gutter])?e.setGutterMarker(l,f,null):e.setGutterMarker(l,h,null);let n=e.lineInfo(l);n.bgClass&&0!==n.bgClass.length||t.splice(r,1)}}}function v(e,t){let i=0;for(let r=0;r<t.length;r++){let l=t[r];if(l.baseTo>e&&l.baseFrom<=e)return 0;if(l.baseFrom>e)break;i=l.remoteTo-l.baseTo}return e+i}function w(e,t){let i=e.baseFrom;for(let e=0;e<t.length;++e){let r=t[e];if(r.baseFrom===i)return r.remoteTo;if(r.baseFrom>i)break}return e.baseTo}function _(e,t,i){let r=0,l=[];for(let i=0;i<e.length;i++)if(null!==t[i]){let n=e[i].heightAtLine(t[i],"local");l[i]=n,r=Math.max(r,n)}for(let n=0;n<e.length;n++)if(null!==t[n]){let s=r-l[n];s>1&&i.push(M(e[n],t[n],s))}}function M(e,t,i){let r=!0;t>e.getDoc().lastLine()&&(t--,r=!1);let l=document.createElement("div");return l.className="CodeMirror-merge-spacer",l.style.height=i+"px",l.style.minWidth="1px",e.addLineWidget(t,l,{height:i,above:r})}t.DiffView=D;class S extends l.Panel{constructor(e){super(),this.initialized=!1,this.collapsedRanges=[],this.options=e;let t=e.remote,i=e.local||null,r=e.merged||null,n=0,s=this.left=null,d=this.right=null,u=this.merge=null,c=this;this.diffViews=[],this.aligners=[];let p=e.remote||e.merged;if(!p)throw new Error("Either remote or merged model needs to be specified!");e.value=null!==p.base?p.base:p.remote,e.lineNumbers=!1!==e.lineNumbers;let g=e.readOnly;e.readOnly=!0;let m=e;if(r&&(e.gutters=[h,f],void 0===e.lineWrapping&&(e.lineWrapping=!1)),this.base=new o.EditorWidget(e.value,a.copyObj({readOnly:!!e.readOnly},e)),this.base.addClass("CodeMirror-merge-pane"),this.base.addClass("CodeMirror-merge-pane-base"),r){let o,c,f=!1!==e.showBase;f||(this.base.node.style.display="hidden"),i&&null!==i.remote?(s=this.left=new D(i,"left",this.alignViews.bind(this),a.copyObj(m)),this.diffViews.push(s),o=s.ownWidget):(s=this.left=null,o=new l.Widget({node:P("div","Value missing","jp-mod-missing")})),o.addClass("CodeMirror-merge-pane"),o.addClass("CodeMirror-merge-pane-local"),this.addWidget(o),f&&this.addWidget(this.base),t&&null!==t.remote?(d=this.right=new D(t,"right",this.alignViews.bind(this),a.copyObj(m)),this.diffViews.push(d),c=d.ownWidget):(d=this.right=null,c=new l.Widget({node:P("div","Value missing","jp-mod-missing")})),c.addClass("CodeMirror-merge-pane"),c.addClass("CodeMirror-merge-pane-remote"),this.addWidget(c),this.addWidget(new l.Widget({node:P("div",null,"CodeMirror-merge-clear","height: 0; clear: both;")})),u=this.merge=new D(r,"merge",this.alignViews.bind(this),a.copyObj({readOnly:g},a.copyObj(m))),this.diffViews.push(u);let h=u.ownWidget;h.addClass("CodeMirror-merge-pane"),h.addClass("CodeMirror-merge-pane-final"),this.addWidget(h),n=3+(f?1:0)}else if(t){if(this.addWidget(this.base),t.unchanged||t.added||t.deleted)t.unchanged?this.base.addClass("CodeMirror-merge-pane-unchanged"):t.added?this.base.addClass("CodeMirror-merge-pane-added"):t.deleted&&this.base.addClass("CodeMirror-merge-pane-deleted"),n=1;else{d=this.right=new D(t,"right",this.alignViews.bind(this),m),this.diffViews.push(d);let e=d.ownWidget;e.addClass("CodeMirror-merge-pane"),e.addClass("CodeMirror-merge-pane-remote"),this.addWidget(new l.Widget({node:d.buildGap()})),this.addWidget(e),n=2}this.addWidget(new l.Widget({node:P("div",null,"CodeMirror-merge-clear","height: 0; clear: both;")}))}this.addClass("CodeMirror-merge"),this.addClass("CodeMirror-merge-"+n+"pane");for(let e of[s,d,u])e&&e.init(this.base.cm);e.collapseIdentical&&n>1&&this.base.cm.operation((function(){!function(e,t){"number"!=typeof t&&(t=2);let i=[],r=e.base.cm,l=r.getDoc().firstLine();for(let e=l,t=r.getDoc().lastLine();e<=t;e++)i.push(!0);e.left&&k(e.left,t,l,i),e.right&&k(e.right,t,l,i),e.merge&&k(e.merge,t,l,i),e.collapsedRanges=[];for(let n=0;n<i.length;n++)if(i[n]){let s=n+l,o=1;for(;n<i.length-1&&i[n+1];n++,o++);if(o>t){let t=[{line:s,cm:r}];e.left&&t.push({line:v(s,e.left.chunks),cm:e.left.ownEditor}),e.right&&t.push({line:v(s,e.right.chunks),cm:e.right.ownEditor}),e.merge&&t.push({line:v(s,e.merge.chunks),cm:e.merge.ownEditor});let i=O(o,t);e.collapsedRanges.push({line:s,size:o}),i.on("clear",(()=>{for(let t=0;t<e.collapsedRanges.length;++t)if(e.collapsedRanges[t].line===s)return void e.collapsedRanges.splice(t,1)})),e.options.onCollapse&&e.options.onCollapse(e,s,o,i)}}}(c,e.collapseIdentical)}));for(let e of[s,d,u])e&&(e.collapsedRanges=this.collapsedRanges);this.initialized=!0,(this.left||this.right||this.merge)&&this.alignViews(!0)}alignViews(e){let t=!1;if(!this.initialized)return;for(let e of this.diffViews)e.syncModel(),e.dealigned&&(t=!0,e.dealigned=!1);if(!t&&!e)return;let i=function(e){let t=[],i=[],r=e[0],l=e.slice(1);for(let e=0;e<r.lineChunks.length;e++){let n=r.lineChunks[e],s=[n.baseTo,n.remoteTo];for(let e of l)s.push(w(n,e.lineChunks));if(t.length>0&&t[t.length-1][0]===s[0]){let e=t[t.length-1];for(let t=0;t<s.length;++t)e[t]=Math.max(e[t],s[t])}else if(t.length>0){let e=t[t.length-1],r=s[0]-e[0];for(let t=1;t<s.length;++t)if(r!==s[t]-e[t]){r=null;break}if(null!==r){i.push(s[0]);continue}t.push(s)}else t.push(s)}for(let e=0;e<l.length;e++)for(let n=0;n<l[e].lineChunks.length;n++){let s=l[e].lineChunks[n],o=0;for(;o<t.length;o++){let e=t[o];if(a.valueIn(s.baseTo,i)){o=-1;break}if(e[0]>=s.baseTo)break}if(o>-1){let i=[s.baseTo,w(s,r.lineChunks)];for(let t=0;t<l.length;t++)t===e?i.push(s.remoteTo):i.push(w(s,l[t].lineChunks));if(t.length>o&&t[o][0]===s.baseTo){let e=t[o];for(let t=0;t<i.length;++t)e[t]=Math.max(e[t],i[t])}else t.splice(o,0,i)}}return t}(this.diffViews),r=this,l=function(){let e=r.aligners;for(let t=0;t<e.length;t++)e[t].clear();e.length=0;let t=[r.base.cm],l=[];for(let e of r.diffViews)t.push(e.ownEditor);for(let e=0;e<t.length;e++)l.push(t[e].getScrollInfo().top);for(let r=0;r<i.length;r++)_(t,i[r],e);for(let e=0;e<t.length;e++)t[e].scrollTo(null,l[e])};var n;this.base.cm.curOp||(n=l,l=function(){r.base.cm.operation(n)});for(let e of this.diffViews)e.ownEditor.curOp||(l=function(t){return function(){e.ownEditor.operation(t)}}(l));l()}setShowDifferences(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)}getMergedValue(){if(!this.merge)throw new Error('No merged value; missing "merged" view');return this.merge.ownEditor.getValue()}}function E(e,t,i){e.addLineClass(t,"wrap","CodeMirror-merge-collapsed-line");let l=document.createElement("span");l.className="CodeMirror-merge-collapsed-widget",l.title="Identical text collapsed. Click to expand.";let n=e.getDoc().markText(r.Pos(t,0),r.Pos(i-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:l,clearOnEnter:!0});function s(){n.clear(),e.removeLineClass(t,"wrap","CodeMirror-merge-collapsed-line")}return r.on(l,"click",s),{mark:n,clear:s}}function O(e,t){let i=[];function r(){for(let e=0;e<i.length;e++)i[e].clear()}for(let l=0;l<t.length;l++){let n=t[l],s=E(n.cm,n.line,n.line+e);i.push(s),s.mark.on("clear",r)}return i[0].mark}function k(e,t,i,r){for(let l=0;l<e.chunks.length;l++){let n=e.chunks[l];for(let e=n.baseFrom-t;e<n.baseTo+t;e++){let t=e+i;t>=0&&t<r.length&&(r[t]=!1)}}}function P(e,t,i,r){let l=document.createElement(e);if(i&&(l.className=i),r&&(l.style.cssText=r),"string"==typeof t)l.appendChild(document.createTextNode(t));else if(t)for(let e=0;e<t.length;++e)l.appendChild(t[e]);return l}function x(e,t,i){for(let r=e.length-1;r>=0;r--){let l=e[r],n=(i?l.remoteTo:l.baseTo)-1;if(n<t)return n}return null}function A(e,t,i){for(let r=0;r<e.length;r++){let l=e[r],n=i?l.remoteFrom:l.baseFrom;if(n>t)return n}return null}var L;function T(e,t){let i=null,l=e.state.diffViews,n=e.getDoc().getCursor().line;if(l)for(let r=0;r<l.length;r++){let s=l[r],o=e===s.ownEditor,a=t===L.Previous?x(s.chunks,n,o):A(s.chunks,n,o);null===a||null!==i&&!(t===L.Previous?a>i:a<i)||(i=a)}if(null===i)return r.Pass;e.getDoc().setCursor(i,0)}t.MergeView=S,function(e){e[e.Previous=-1]="Previous",e[e.Next=1]="Next"}(L||(L={})),r.commands.goNextDiff=function(e){return T(e,L.Next)},r.commands.goPrevDiff=function(e){return T(e,L.Previous)}},8439:(e,t)=>{"use strict";function i(e,t){return t.indexOf(e)>=0}function r(e,t){let i=[];for(let t=0;t<e.length;++t)i.push({index:t,key:e[t]});i=i.sort(((e,i)=>t(e.key,i.key)||e.index-i.index));let r=new Array(e.length);for(let t=0;t<e.length;++t)r[t]=e[i[t].index];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.buildSelect=t.copyObj=t.stableSort=t.intersection=t.unique=t.accumulateLengths=t.repeatString=t.sortByKey=t.isPrefixArray=t.findSharedPrefix=t.arraysEqual=t.shallowCopy=t.deepCopy=t.splitLines=t.hasEntries=t.valueIn=void 0,t.valueIn=i,t.hasEntries=function(e){return null!==e&&0!==e.length},t.splitLines=function(e){return e.match(/^.*(\r\n|\r|\n|$)/gm)},t.deepCopy=function e(t){if("object"!=typeof t){if(i(typeof t,["string","number","boolean"]))return t;throw new TypeError("Cannot deepcopy non-object")}if(null===t)return null;if(Array.isArray(t)){let i=t.length,r=new Array(i);for(let l=0;l<i;l++)r[l]=e(t[l]);return r}{let i=t,r={};void 0!==i.prototype&&(r.prototype=i.prototype);for(let l in t)r[l]=e(i[l]);return r}},t.shallowCopy=function(e){let t=Object.create(Object.getPrototypeOf(e));for(let i in e){let r=e[i];if(null!=r&&r.hasOwnProperty("constructor")&&r.constructor===Function)continue;let l=Object.getOwnPropertyDescriptor(e,i);l&&!l.get&&Object.defineProperty(t,i,l)}return t},t.arraysEqual=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},t.findSharedPrefix=function(e,t){if(null===e||null===t)return null;if(e===t)return e.slice();let i=0;for(;i<Math.min(e.length,t.length)&&e[i]===t[i];++i);return e.slice(0,i)},t.isPrefixArray=function(e,t){if(e===t)return!0;if(null===e||0===e.length)return!0;if(null===t||e.length>t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},t.sortByKey=function(e,t){return r(e,(function(e,i){let r=e[t],l=i[t];return r<l?-1:r>l?1:0}))},t.repeatString=function(e,t){if(t<1)return"";let i="",r=e.valueOf();for(;t>1;)1&t&&(i+=r),t>>=1,r+=r;return i+r},t.accumulateLengths=function(e){let t=[];return e.reduce((function(e,i,r){return t[r]=e+i.length}),0),t},t.unique=function(e,t,i){return i.indexOf(e)===t},t.intersection=function(e,t){let i=[];[e,t]=e.length>t.length?[e,t]:[t,e];for(let r of e)-1!==t.indexOf(r)&&i.push(r);return i},t.stableSort=r,t.copyObj=function(e,t){t||(t={});for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.buildSelect=function(e,t){void 0===t&&(t=document.createElement("select"));for(let i of e){let e=document.createElement("option");e.value=e.innerHTML=i,t.appendChild(e)}return t}},4632:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateObjectOp=t.validateSequenceOp=t.opPatch=t.opRemoveRange=t.opAddRange=t.opRemove=t.opAdd=t.opReplace=void 0;const r=i(8439);t.opReplace=function(e,t){return{op:"replace",key:e,value:t}},t.opAdd=function(e,t){return{op:"add",key:e,value:t}},t.opRemove=function(e){return{op:"remove",key:e}},t.opAddRange=function(e,t){return{op:"addrange",key:e,valuelist:t}},t.opRemoveRange=function(e,t){return{op:"removerange",key:e,length:t}},t.opPatch=function(e,t){return{op:"patch",key:e,diff:t}},t.validateSequenceOp=function(e,t){if("number"!=typeof t.key)throw console.info("Invalid patch details",e,t),new TypeError(`Invalid patch sequence op: Key is not a number: ${t.key}`);let i=t.key;if("addrange"===t.op){if(i<0||i>e.length||isNaN(i))throw new RangeError("Invalid add range diff op: Key out of range: "+i)}else if("removerange"===t.op){if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Key out of range: "+i);if(i+t.length>e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Range too long!")}else{if("patch"!==t.op)throw new Error("Invalid op: "+t.op);if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid patch diff op: Key out of range: "+i)}},t.validateObjectOp=function(e,t,i){let l=t.op;if("string"!=typeof t.key)throw console.info("Invalid patch details",e,t,i),new TypeError(`Invalid patch object op: Key is not a string: ${t.key}`);let n=t.key;if("add"===l){if(r.valueIn(n,i))throw new Error("Invalid add key diff op: Key already present: "+n)}else if("remove"===l){if(!r.valueIn(n,i))throw new Error("Invalid remove key diff op: Missing key: "+n)}else if("replace"===l){if(!r.valueIn(n,i))throw new Error("Invalid replace key diff op: Missing key: "+n)}else{if("patch"!==l)throw new Error("Invalid op: "+l);if(!r.valueIn(n,i))throw new Error("Invalid patch key diff op: Missing key: "+n)}}},1999:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeletedCellDiffModel=t.createAddedCellDiffModel=t.createUnchangedCellDiffModel=t.createPatchedCellDiffModel=t.CellDiffModel=void 0;const r=i(2004),l=i(1156),n=i(4526),s=i(8282),o=i(1716),a=i(7727);class d{constructor(e,t,i,r,n){if(this.source=e,this.metadata=t,this.outputs=i,this.executionCount=r,this.cellType=n,null===i&&"code"===n)throw new l.NotifyUserError("Invalid code cell, missing outputs!");this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Metadata changed",this.metadata.startCollapsed=!0}get unchanged(){let e=this.source.unchanged;if(e=e&&(!this.metadata||this.metadata.unchanged),this.outputs)for(let t of this.outputs)e=e&&t.unchanged;return this.executionCount&&(e=e&&this.executionCount.unchanged),e}get added(){return this.source.added}get deleted(){return this.source.deleted}getChunkedOutputs(){if(null===this.outputs)return null;const e=[];if(this.added||this.deleted)for(let t of this.outputs)e.push([t]);else{let t=[];for(let i of this.outputs)i.added||i.deleted?t.push(i):(t.length&&e.push(t),e.push([i]),t=[]);t.length&&e.push(t)}return e}}t.CellDiffModel=d,t.createPatchedCellDiffModel=function(e,t,i){let l=null,u=null,c=null,f=null,h=n.getSubDiffByKey(t,"source");if(l=h?s.createPatchStringDiffModel(e.source,h):s.createDirectStringDiffModel(e.source,e.source),s.setMimetypeFromCellType(l,e,i),h=n.getSubDiffByKey(t,"metadata"),u=h?s.createPatchStringDiffModel(e.metadata,h):s.createDirectStringDiffModel(e.metadata,e.metadata),r.isCode(e)){let i=e.outputs,r=n.getSubDiffByKey(t,"outputs");c=r?o.makeOutputModels(i,null,r):o.makeOutputModels(i,i);let l=e.execution_count,s=n.getDiffEntryByKey(t,"execution_count");f=a.createImmutableModel(l,l,s)}return new d(l,u,c,f,e.cell_type)},t.createUnchangedCellDiffModel=function(e,t){let i=s.createDirectStringDiffModel(e.source,e.source);s.setMimetypeFromCellType(i,e,t);let l=s.createDirectStringDiffModel(e.metadata,e.metadata),n=null,u=null;if(r.isCode(e)){n=o.makeOutputModels(e.outputs,e.outputs);let t=e.execution_count;u=a.createImmutableModel(t,t)}return new d(i,l,n,u,e.cell_type)},t.createAddedCellDiffModel=function(e,t){let i=s.createDirectStringDiffModel(null,e.source);s.setMimetypeFromCellType(i,e,t);let l=s.createDirectStringDiffModel(null,e.metadata),n=null,u=null;return r.isCode(e)&&(n=o.makeOutputModels(null,e.outputs),u=a.createImmutableModel(null,e.execution_count)),new d(i,l,n,u,e.cell_type)},t.createDeletedCellDiffModel=function(e,t){let i=s.createDirectStringDiffModel(e.source,null);s.setMimetypeFromCellType(i,e,t);let l=s.createDirectStringDiffModel(e.metadata,null),n=null,u=null;if(r.isCode(e)){n=o.makeOutputModels(e.outputs,null);let t=e.execution_count;u=a.createImmutableModel(t,null)}return new d(i,l,n,u,e.cell_type)}},3889:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImmutableModel=t.ImmutableDiffModel=void 0;class i{constructor(e,t,i,r,l){this.base=e,this.remote=t,this.collapsible=!0===i,this.collapsible&&(this.collapsibleHeader=r||"",this.startCollapsed=!0===l)}get unchanged(){return this.base===this.remote}get added(){return void 0===this.base}get deleted(){return void 0===this.remote}}t.ImmutableDiffModel=i,t.createImmutableModel=function(e,t,r){if(r){if("add"===r.op){if(void 0!==e)throw new Error("Invalid diff op on immutable value");return new i(e,r.value)}if("remove"===r.op){if(void 0===e)throw new Error("Invalid diff op on immutable value");return new i(e,void 0)}if(void 0===e)throw new Error("Invalid diff op on immutable value");return new i(e,r.value)}return new i(e,t)}},3127:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),l=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),l(i(1999),t),l(i(3889),t),l(i(7727),t),l(i(5487),t),l(i(1716),t),l(i(3846),t),l(i(8282),t)},5487:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDiffModel=void 0;const r=i(4526),l=i(8282),n=i(1999);t.NotebookDiffModel=class{constructor(e,t){let i,s=r.getSubDiffByKey(t,"metadata");e.metadata&&s?this.metadata=l.createPatchStringDiffModel(e.metadata,s):this.metadata=null,this.metadata&&(this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Notebook metadata changed",this.metadata.startCollapsed=!0);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=[],this.chunkedCells=[];let o=0,a=0,d=-1,u=[];for(let i of r.getSubDiffByKey(t,"cells")||[]){let t=i.key;for(let i=o;i<t;i++){let t=n.createUnchangedCellDiffModel(e.cells[i],this.mimetype);this.cells.push(t),this.chunkedCells.push([t])}if(t!==d&&(u=[],this.chunkedCells.push(u),d=t),"addrange"===i.op){for(let e of i.valuelist){let t=n.createAddedCellDiffModel(e,this.mimetype);this.cells.push(t),u.push(t)}a=0}else if("removerange"===i.op){a=i.length;for(let i=t;i<t+a;i++){let t=n.createDeletedCellDiffModel(e.cells[i],this.mimetype);this.cells.push(t),u.push(t)}}else if("patch"===i.op){u.length>0&&(u=[],this.chunkedCells.push(u));let r=n.createPatchedCellDiffModel(e.cells[t],i.diff,this.mimetype);this.cells.push(r),u.push(r),a=1}o=Math.max(o,t+a)}for(let t=o;t<e.cells.length;t++){let i=n.createUnchangedCellDiffModel(e.cells[t],this.mimetype);this.cells.push(i),this.chunkedCells.push([i])}}}},1716:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOutputModels=t.OutputDiffModel=void 0;const r=i(2004),l=i(1156),n=i(3846),s=["text/plain","application/vnd.jupyter.stdout","application/vnd.jupyter.stderr"];class o extends n.RenderableDiffModel{hasMimeType(e){let t=this.base||this.remote;return r.isStream(t)&&-1!==s.indexOf(e)?"text":r.isError(t)?"traceback":(r.isExecuteResult(t)||r.isDisplayData(t))&&e in t.data?["data",e]:null}innerMimeType(e){let t=(this.base||this.remote).output_type;if("stream"===t&&"text"===e||"error"===t&&"traceback"===e)return"text/plain";if(("execute_result"===t||"display_data"===t)&&Array.isArray(e))return e[1];throw new l.NotifyUserError("Unknown MIME type for key: "+e)}stringify(e){let t=super.stringify(e);return e&&(t.mimetype=this.innerMimeType(e)),t}}t.OutputDiffModel=o,t.makeOutputModels=function(e,t,i){let r=[];if(null!==t||i)if(null===e){if(null===t)throw new Error("Either base or remote need to be specififed!");for(let e of t)r.push(new o(null,e))}else if(t===e)for(let t of e)r.push(new o(t,t));else{if(!i)throw new Error("Invalid arguments to makeOutputModels()");{let t=0,l=0;for(let n of i){let i=n.key;for(let l of e.slice(t,i))r.push(new o(l,l));if("addrange"===n.op){for(let e of n.valuelist)r.push(new o(null,e));l=0}else if("removerange"===n.op){let t=n.length;for(let l=i;l<i+t;l++)r.push(new o(e[l],null));l=t}else{if("patch"!==n.op)throw new Error("Invalid diff operation: "+n);r.push(new o(e[i],null,n.diff)),l=1}t=Math.max(t,i+l)}for(let i of e.slice(t))r.push(new o(i,i))}}else{if(null===e)throw new Error("Either base or remote need to be specififed!");for(let t of e)r.push(new o(t,null))}return r}},3846:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableDiffModel=void 0;const r=i(1797),l=i(6168),n=i(4526),s=i(8787),o=i(8282);t.RenderableDiffModel=class{constructor(e,t,i){if(this.trustedChanged=new l.Signal(this),!t&&!e)throw new Error("Either remote or base value need to be given");this.base=e,this.remote=!t&&i?s.patch(e,i):t,this.diff=i||null,this.collapsible=!1}get unchanged(){return JSON.stringify(this.base)===JSON.stringify(this.remote)}get added(){return null===this.base}get deleted(){return null===this.remote}stringify(e){let t=function(e,i,r){if(!e)return e;if(Array.isArray(i)){const l=i.length>2?i.slice(1):i[1];return t(r?r(e,i[0]):e[i[0]],l,r)}return r?r(e,i):e[i]};const i=r.JSONExt.deepCopy(this.base);let l=e?t(i,e):i;const s=r.JSONExt.deepCopy(this.remote);let a=e?t(s,e):s,d=this.diff&&e?t(this.diff,e,n.getSubDiffByKey):this.diff,u=null;return u=this.unchanged||this.added||this.deleted||!d?o.createDirectStringDiffModel(l,a):o.createPatchStringDiffModel(l,d),u.mimetype=e?this.innerMimeType(e):"application/json",u.collapsible=this.collapsible,u.collapsibleHeader=this.collapsibleHeader,u.startCollapsed=this.startCollapsed,u}get trusted(){return this._trusted}set trusted(e){this._trusted!==e&&(this._trusted=e,this.trustedChanged.emit(e))}get contents(){let e=[];return this.base&&e.push(this.base),this.remote&&this.remote!==this.base&&e.push(this.remote),e}}},8282:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMimetypeFromCellType=t.createDirectStringDiffModel=t.createPatchStringDiffModel=t.StringDiffModel=void 0;const r=i(2004),l=i(1797),n=i(8799),s=i(8049),o=i(8787);class a{constructor(e,t,i,r,l,s,o){this.base=e,this.remote=t,null===e?(console.assert(0===r.length),this.deletions=[]):this.deletions=n.raw2Pos(r,e),null===t?(console.assert(0===i.length),this.additions=[]):this.additions=n.raw2Pos(i,t),this.collapsible=!0===l,this.collapsible&&(this.collapsibleHeader=s||"",this.startCollapsed=!0===o)}iterateDiffs(){return new a.DiffIter(this)}getLineChunks(){let e=new s.LineChunker,t=this.iterateDiffs();for(let i=t.next();void 0!==i;i=t.next())e.addDiff(i.range,i.isAddition);return e.chunks}get unchanged(){return this.base===this.remote}get added(){return null===this.base}get deleted(){return null===this.remote}}t.StringDiffModel=a,function(e){e.DiffIter=class{constructor(e){this.editOffset=0,this.done=!1,this.ia=0,this.id=0,this.hintTakeDeletion=!1,this.model=e}next(){let e=null,t=null,i=this.model.additions,r=this.model.deletions,l=this.hintTakeDeletion;if(this.hintTakeDeletion=!1,this.ia<this.model.additions.length)if(this.id<r.length){let t=i[this.ia],n=r[this.id];t.from.line===n.from.line-this.editOffset&&t.from.ch===n.from.ch?l?e=!1:(this.hintTakeDeletion=!0,e=!0):e=t.from.line<n.from.line-this.editOffset||t.from.line===n.from.line-this.editOffset&&t.from.ch<n.from.ch}else e=!0;else{if(!(this.id<r.length))return void(this.done=!0);e=!1}t=e?i[this.ia++]:r[this.id++];let n=t.to.line-t.from.line;return t.endsOnNewline&&(n+=1),this.editOffset+=e?-n:n,{range:t,isAddition:e}}};class t{constructor(e){this.currentOffset=0,this.models=[],this.iterators=[],this.values=[],this.offsets=[];for(let t of e){if(null===t)continue;this.models.push(t);let e=t.iterateDiffs();this.iterators.push(e),this.offsets.push(0),this.values.push(e.next())}}static cmp(e,t,i,r){if(void 0===e&&void 0===t)return 0;if(void 0===e)return 1;if(void 0===t)return-1;let l=e.range.from.line+(e.isAddition?i:0),n=t.range.from.line+(t.isAddition?r:0);return l<n||e.range.from.ch<t.range.from.ch?-1:l>n||e.range.from.ch>t.range.from.ch?1:0}next(){let e=0;for(let i=1;i<this.values.length;++i)0>t.cmp(this.values[i],this.values[e],this.iterators[i].editOffset,this.iterators[e].editOffset)&&(e=i);this.i=e;let i=this.values[e];return this.currentOffset=this.offsets[e],this.offsets[e]=this.iterators[e].editOffset,void 0!==i&&(this.values[e]=this.iterators[e].next()),i}currentModel(){return this.models[this.i]}}e.SyncedDiffIter=t}(a=t.StringDiffModel||(t.StringDiffModel={})),t.createPatchStringDiffModel=function(e,t){console.assert(!!t,"Patch model needs diff.");const i=l.JSONExt.deepCopy(e);let r=o.stringifyAndBlankNull(i),n=o.patchStringified(i,t);return new a(r,n.remote,n.additions,n.deletions)},t.createDirectStringDiffModel=function(e,t){let i=o.stringifyAndBlankNull(e),r=o.stringifyAndBlankNull(t),l=[],s=[];if(null===e&&null===t)throw new Error("Invalid arguments to createDirectStringDiffModel(). Both base and remote cannot be equal!");if(null===e)i=null,l.push(new n.DiffRangeRaw(0,r.length,void 0));else if(null===t)r=null,s.push(new n.DiffRangeRaw(0,i.length,void 0));else if(r!==i)throw new Error("Invalid arguments to createDirectStringDiffModel(). Either base or remote should be null, or they should be equal!");return new a(i,r,l,s)},t.setMimetypeFromCellType=function(e,t,i){"code"===t.cell_type?e.mimetype=i:"markdown"===t.cell_type?e.mimetype="text/markdown":r.isRaw(t)&&(e.mimetype=t.metadata.format||"text/plain")}},8799:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raw2Pos=t.DiffRangePos=t.DiffRangeRaw=void 0;const r=i(8681),l=i(8439);t.DiffRangeRaw=class{constructor(e,t,i){this.from=e,this.to=e+t,this.source=i}offset(e){this.from+=e,this.to+=e}};class n{constructor(e,t,i,r){this.from=e,this.to=t,this.chunkStartLine=!0===i,this.endsOnNewline=!0===r}}function s(e,t){if(0===e.length)return 0;let i=null;return e.some((function(e,r){return e>=t&&(i=r,!0)})),null===i?e.length:i}t.DiffRangePos=n,t.raw2Pos=function(e,t){let i=[],o=-1;for(;-1!==(o=t.indexOf("\n",o+1));)i.push(o);let a=[];for(let o of e){let e=s(i,o.from),d=e>0?i[e-1]+1:0,u=r.Pos(e,o.from-d);e=s(i,o.to-1),d=e>0?i[e-1]+1:0;let c=r.Pos(e,o.to-d),f=l.valueIn(o.from,i),h=l.valueIn(o.to-1,i),p=0===u.ch&&(u.line!==c.line||h||o.to===t.length)||!f||!l.valueIn(o.from-1,i)&&!l.valueIn(o.to,i),g=new n(u,c,p,h);g.source=o.source,a.push(g)}return a}},4526:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenStringDiff=t.stripSource=t.getDiffEntryByKey=t.getSubDiffByKey=t.JSON_INDENT=void 0;const r=i(8439),l=i(4632);function n(e,t,i){if(l.validateSequenceOp(e,t),"patch"===t.op){let i=e[t.key],r=t.diff;if(null!==r)for(let e of r)l.validateSequenceOp(i,e)}}t.JSON_INDENT="  ",t.getSubDiffByKey=function(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i].diff||null;return null},t.getDiffEntryByKey=function(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i];return null},t.stripSource=function e(t){if(!t)return null;let i=[];for(let l of t)if("patch"===l.op)i.push({key:l.key,op:l.op,diff:e(l.diff)});else{let e=r.shallowCopy(l);delete e.source,i.push(e)}return i},t.flattenStringDiff=function(e,t){"string"==typeof e&&(e=r.splitLines(e));let i=[0].concat(r.accumulateLengths(e)),s=[];for(let o of t){n(e,o);let t=i[o.key];if("patch"===o.op){let e=o.diff;if(null!==e)for(let i of e){let e=r.shallowCopy(i);e.key+=t,s.push(e)}}else{let e=null;if("addrange"===o.op)e=l.opAddRange(t,o.valuelist.join(""));else{let r=o.key+o.length;e=l.opRemoveRange(t,i[r]-t)}e.source=o.source,s.push(e)}}return r.sortByKey(s,"key")}},2191:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellDiffWidget=t.OUTPUTS_DIFF_CLASS=t.CELLDIFF_CLASS=void 0;const r=i(3706),l=i(9202),n=i(5168),s=i(3788),o=i(111),a=i(8439),d=i(3127),u=i(5494),c=i(4530);t.CELLDIFF_CLASS="jp-Cell-diff",t.OUTPUTS_DIFF_CLASS="jp-Diff-outputsContainer";const f="jp-Cellrow-outputs";class h extends r.Panel{constructor(e,i,r){super(),this.addClass(t.CELLDIFF_CLASS),this._model=e,this._rendermime=i,this.mimetype=r,this.init()}init(){let e=this.model,i=u.DIFF_CLASSES.slice();e.added?(this.addClass(u.ADDED_DIFF_CLASS),i=u.DIFF_CLASSES.slice(1,2)):e.deleted?(this.addClass(u.DELETED_DIFF_CLASS),i=u.DIFF_CLASSES.slice(0,1)):e.unchanged?this.addClass(u.UNCHANGED_DIFF_CLASS):this.addClass(u.TWOWAY_DIFF_CLASS);let l=h.createView(e.source,e,i,this._rendermime);if(l.addClass("jp-Cellrow-source"),e.executionCount&&l.insertWidget(0,h.createPrompts(e.executionCount,e)),this.addWidget(l),!e.metadata.unchanged){let t=h.createView(e.metadata,e,i,this._rendermime);t.addClass("jp-Cellrow-metadata"),this.addWidget(t)}const n=e.getChunkedOutputs();if(a.hasEntries(n)){let l=new r.Panel;l.addClass(t.OUTPUTS_DIFF_CLASS);let o=!1;for(let t of n)if(1===t.length){let r=t[0],n=h.createView(r,e,i,this._rendermime);l.addWidget(n),o=o||!r.unchanged||r.added||r.deleted}else{let n=new r.Panel;n.addClass(u.CHUNK_PANEL_CLASS);let s=new r.Panel;s.addClass(u.ADDED_CHUNK_PANEL_CLASS);let a=new r.Panel;a.addClass(u.REMOVED_CHUNK_PANEL_CLASS);for(let r of t){let t=r.deleted?a:s,l=h.createView(r,e,i,this._rendermime);t.addWidget(l),o=o||!r.unchanged||r.added||r.deleted}n.addWidget(s),n.addWidget(a),l.addWidget(n)}if(e.added||e.deleted)l.addClass(f),this.addWidget(l);else{let e=!o,t=o?"Outputs changed":"Outputs unchanged",i=new s.CollapsiblePanel(l,t,e);i.addClass(f),this.addWidget(i)}}}static createPrompts(e,t){let i=[];if(!t.added){let t=`In [${e.base||" "}]:`;i.push(t)}if(!t.unchanged&&!t.deleted){let t=`In [${e.remote||" "}]:`;i.push(t)}let l=new n.FlexPanel({direction:"left-to-right"});for(let e of i){let t=new r.Widget;t.node.innerText=e,t.addClass("jp-InputPrompt"),l.addWidget(t),n.FlexPanel.setGrow(t,1)}return l.addClass("jp-Cellrow-executionCount"),l}static createView(e,t,i,n){let a;if(e instanceof d.StringDiffModel){let i=null;if(e.unchanged&&"markdown"===t.cellType){let t=new l.MimeModel({data:{"text/markdown":e.base}}),r=n.preferredMimeType(t.data,"ensure");if(!r)throw new Error("No renderer for output");let s=n.createRenderer(r);s.renderModel(t),i=s}else i=o.createNbdimeMergeView(e);e.collapsible?a=new s.CollapsiblePanel(i,e.collapsibleHeader,e.startCollapsed):(a=new r.Panel,a.addWidget(i))}else{if(!(e instanceof d.OutputDiffModel))throw new Error("Unrecognized model type.");a=new c.OutputPanel(e,t,i,n),e.added?a.addClass(u.ADDED_DIFF_CLASS):e.deleted?a.addClass(u.DELETED_DIFF_CLASS):e.unchanged?a.addClass(u.UNCHANGED_DIFF_CLASS):a.addClass(u.TWOWAY_DIFF_CLASS)}return a}get model(){return this._model}}t.CellDiffWidget=h},5494:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_DEL_LABEL_CLASS=t.REMOVED_CHUNK_PANEL_CLASS=t.ADDED_CHUNK_PANEL_CLASS=t.CHUNK_PANEL_CLASS=t.DIFF_CLASSES=t.UNCHANGED_DIFF_CLASS=t.DELETED_DIFF_CLASS=t.ADDED_DIFF_CLASS=t.TWOWAY_DIFF_CLASS=void 0,t.TWOWAY_DIFF_CLASS="jp-Diff-twoway",t.ADDED_DIFF_CLASS="jp-Diff-added",t.DELETED_DIFF_CLASS="jp-Diff-deleted",t.UNCHANGED_DIFF_CLASS="jp-Diff-unchanged",t.DIFF_CLASSES=["jp-Diff-base","jp-Diff-remote"],t.CHUNK_PANEL_CLASS="jp-Diff-addremchunk",t.ADDED_CHUNK_PANEL_CLASS="jp-Diff-addedchunk",t.REMOVED_CHUNK_PANEL_CLASS="jp-Diff-removedchunk",t.ADD_DEL_LABEL_CLASS="jp-Diff-label"},7842:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),l=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),l(i(2191),t),l(i(3534),t),l(i(2569),t)},2569:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataDiffWidget=void 0;const r=i(3706),l=i(111),n=i(3788),s=i(5494);class o extends r.Panel{constructor(e){super(),this._model=e,console.assert(!e.added&&!e.deleted),this.addClass("jp-Metadata-diff"),this.init()}init(){let e=this._model;if(!e.unchanged){this.addClass(s.TWOWAY_DIFF_CLASS);let t=l.createNbdimeMergeView(e);e.collapsible&&(t=new n.CollapsiblePanel(t,e.collapsibleHeader,e.startCollapsed)),this.addWidget(t)}}}t.MetadataDiffWidget=o},3534:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDiffWidget=void 0;const r=i(3706),l=i(2191),n=i(5494),s=i(2569);class o extends r.Panel{constructor(e,t){super(),this._model=e,this._rendermime=t,this.addClass("jp-Notebook-diff")}init(){let e=this._model,t=this._rendermime,i=Promise.resolve();i=i.then((()=>{e.metadata&&this.addWidget(new s.MetadataDiffWidget(e.metadata))}));for(let s of e.chunkedCells)i=i.then((()=>new Promise((i=>{if(1!==s.length||s[0].added||s[0].deleted){let i=new r.Panel;i.addClass(n.CHUNK_PANEL_CLASS);let o=new r.Panel;o.addClass(n.ADDED_CHUNK_PANEL_CLASS);let a=new r.Panel;a.addClass(n.REMOVED_CHUNK_PANEL_CLASS);for(let i of s)(i.deleted?a:o).addWidget(new l.CellDiffWidget(i,t,e.mimetype));i.addWidget(o),i.addWidget(a),this.addWidget(i)}else this.addWidget(new l.CellDiffWidget(s[0],t,e.mimetype));requestAnimationFrame((()=>{i()}))}))));return i}get model(){return this._model}}t.NotebookDiffWidget=o},4530:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableOutputView=t.OutputPanel=void 0;const r=i(3706),l=i(9850),n=i(9202),s=i(3788),o=i(111),a=i(8439),d=i(5494),u=i(2621),c="jp-Diff-trustCandidate",f=["text/html"];let h=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;function p(e,t=64){return null!==e&&e.length>t&&h.test(e.replace("\n",""))}class g extends r.Panel{constructor(e,t,i,l){if(super(),this._mimetype=null,this.forceText=!1,this.model=e,this.rendermime=l,this.editorClasses=i,e.trustedChanged.connect(((e,t)=>{this.trustedChanged(t)})),g.isTrustSignificant(e,this.rendermime)&&this.addClass(c),e.added){if(!t.added){let e=new r.Widget;e.node.textContent="Output added",e.addClass(d.ADD_DEL_LABEL_CLASS),this.addWidget(e)}this.addClass(d.ADDED_DIFF_CLASS)}else if(e.deleted){if(!t.deleted){let e=new r.Widget;e.node.textContent="Output deleted",e.addClass(d.ADD_DEL_LABEL_CLASS),this.addWidget(e)}this.addClass(d.DELETED_DIFF_CLASS)}else e.unchanged?this.addClass(d.UNCHANGED_DIFF_CLASS):this.addClass(d.TWOWAY_DIFF_CLASS);let n=this.createView();this.initContainer(n),this.createHoverMenu(),this.addClass("jp-Diff-outputPanel")}initContainer(e){this.model.collapsible?this.container=new s.CollapsiblePanel(e,this.model.collapsibleHeader,this.model.startCollapsed):(this.container=this,this.container.addWidget(e)),this.view=e}replaceView(e){let t=this.view,i=this.container.widgets.indexOf(t);this.container.insertWidget(i,e),t.parent=null,this.view=e}createView(e=!1){let t=null,i=this.model,r=this.rendermime;return t=m.canRender(i,r)&&!e?new m(i,this.editorClasses,r,this.selectedMimetype):this.createOutputTextView(),t}createOutputTextView(){let e,t=this.model,i=null;if(null===this.selectedMimetype?l.find(this.rendermime.mimeTypes,(e=>(i=t.hasMimeType(e),null!==i))):i=t.hasMimeType(this.selectedMimetype),i){let r=t.stringify(i);p(r.base||r.remote)||(e=o.createNbdimeMergeView(r))}return e||(e=o.createNbdimeMergeView(t.stringify())),e}createHoverMenu(){this.menu=new r.Panel,this.menu.addClass("jp-Diff-outputMenu"),this.container.addWidget(this.menu);let e=document.createElement("button"),t=["Show source","Render"];e.innerText=t[0],e.onclick=i=>{this.forceText=!this.forceText,e.innerText=t[this.forceText?1:0],this.updateView()};let i=new r.Widget({node:e});i.addClass("jp-Diff-showOutputSourceButton"),this.menu.addWidget(i);let l=document.createElement("button");l.innerText="Trust",l.onclick=e=>{this.model.trusted=!this.model.trusted},i=new r.Widget({node:l}),i.addClass("jp-Diff-trustOutputButton"),this.menu.addWidget(i);let s=[];for(let e of this.model.contents){let t=n.OutputModel.getData(e);s=s.concat(Object.keys(t))}if(s=s.filter(a.unique),s.length>1){let e=a.buildSelect(s),t=this.selectedMimetype;t&&(e.selectedIndex=s.indexOf(t)),e.onchange=t=>{this.selectedMimetype=s[e.selectedIndex]},i=new r.Widget({node:e}),i.addClass("jp-Diff-outputMimetypeSelect"),this.menu.addWidget(i)}else if(1===s.length){let e=document.createElement("span");e.innerText=s[0],i=new r.Widget({node:e}),this.menu.addWidget(i)}}trustedChanged(e){this.updateView(),e?this.removeClass(c):g.isTrustSignificant(this.model,this.rendermime)&&this.addClass(c)}updateView(){let e=this.model;if(this.view instanceof m)if(!this.forceText&&m.canRender(e,this.rendermime))this.view.updateView(this.selectedMimetype,e.trusted);else{let e=this.createView(this.forceText);this.replaceView(e)}else{let e=this.createView(this.forceText);this.replaceView(e)}}get selectedMimetype(){if(null!==this._mimetype)return this._mimetype;let e=n.OutputModel.getData(this.model.base||this.model.remote),t=this.rendermime.preferredMimeType(e,this.model.trusted?"any":"ensure");return void 0===t?null:t}set selectedMimetype(e){this._mimetype!==e&&(this._mimetype=e,this.updateView())}static isTrustSignificant(e,t){if(e.trusted)return!1;let i=[];e.base&&i.push(e.base),e.remote&&e.remote!==e.base&&i.push(e.remote);for(let e of i){let i=new n.OutputModel({value:e,trusted:!1}),r=Object.keys(i.data),s=l.toArray(t.mimeTypes),o=a.intersection(r,s);for(let e of o){let i=t.getFactory(e);if(i&&(!i.safe||-1!==f.indexOf(e)))return!0}}return!1}}t.OutputPanel=g;class m extends u.RenderableDiffView{constructor(e,t,i,r){super(e,t,i,r)}createSubView(e,t){let i=new y(this.rendermime);return i.updateView(e,t,this.mimetype),i}updateView(e,t){let i=0,r=this.model;this.mimetype=e,l.each(this.layout.widgets,(l=>{if(l instanceof y){let n=null;0===i&&r.base?n=r.base:r.remote&&(n=r.remote),n&&l.updateView(n,t,e),++i}}))}static canRender(e,t){let i=e.contents;for(let r of i){let i=n.OutputModel.getData(r);if(!t.preferredMimeType(i,e.trusted?"any":"ensure"))return!1}return!0}}t.RenderableOutputView=m;class y extends r.Panel{constructor(e){super(),this.rendermime=e}updateView(e,t,i){let r=this.renderer;this.renderer=this.createRenderer(e,t,i),void 0!==r&&r.dispose(),this.addWidget(this.renderer)}createRenderer(e,t,i){let r=new n.OutputModel({value:e,trusted:t}),l=this.rendermime.createRenderer(i);return l.renderModel(r),l.addClass("jp-Diff-renderedOutput"),p(n.OutputModel.getData(e)[i])&&l.addClass("jp-diff-base64Output"),l}}},2621:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableDiffView=void 0;const r=i(3706);class l extends r.Widget{constructor(e,t,i,l){super(),this.rendermime=i,this.model=e,this.mimetype=l;let n=e.base,s=e.remote;this.layout=new r.PanelLayout;let o=0;if(n){let i=this.createSubView(n,e.trusted);this.layout.addWidget(i),i.addClass(t[o++])}if(s&&s!==n){let i=this.createSubView(s,e.trusted);this.layout.addWidget(i),i.addClass(t[o++])}}}t.RenderableDiffView=l},1604:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterDecisions=t.pushPatchDecision=t.buildDiffs=t.applyDecisions=t.resolveCommonPaths=t.pushPath=t.popPath=t.addSorted=t.decisionSortKey=t.decisionPathSortKey=t.MergeDecision=void 0;const r=i(4632),l=i(4526),n=i(8787),s=i(8439);function o(e,t){return void 0===e?t:e}class a{constructor(e,t=null,i=null,r="base",l=!1,n=null,d=null){this.level=0,e instanceof Array?this._path=e:e instanceof a?(this._path=e.absolutePath.slice(),t=e.localDiff,i=e.remoteDiff,r=e.action,l=e.conflict,n=e.customDiff,d=e.similarInsert,this.level=e.level):(this._path=o(e.common_path,[]),t=o(e.local_diff,t),i=o(e.remote_diff,i),r=function(e){if(s.valueIn(e,["base","local","remote","local_then_remote","remote_then_local","custom","clear","clear_parent","either"]))return e;throw new Error("Invalid merge decision action: "+e)}(o(e.action,r)),l=o(e.conflict,l),n=o(e.custom_diff,n),d=o(e.similar_insert,d)),this.localDiff=t,this.remoteDiff=i,this.action=r,this.conflict=l,this.customDiff=n,this.similarInsert=d}setValuesFrom(e){this._path=e.absolutePath.slice(),this.localDiff=e.localDiff,this.remoteDiff=e.remoteDiff,this.action=e.action,this.conflict=e.conflict,this.customDiff=e.customDiff,this.similarInsert=e.similarInsert,this.level=e.level}get localPath(){return this._path.slice(this.level)}get absolutePath(){return this._path}set absolutePath(e){this._path=e}pushPath(e){this._path.push(e)}get diffs(){let e=[this.localDiff,this.remoteDiff];return this.customDiff&&e.push(this.customDiff),e}set diffs(e){this.localDiff=e[0],this.remoteDiff=e[1],e.length>2&&(this.customDiff=e[2])}serialize(){return{common_path:this.absolutePath.slice(),local_diff:l.stripSource(this.localDiff),remote_diff:l.stripSource(this.remoteDiff),action:this.action,conflict:this.conflict,custom_diff:l.stripSource(this.customDiff)}}}function d(e,t){if(e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return 0}return t.length-e.length}function u(e,t){if(e.length<1)return null;let i=0;for(let t of e){if(null!==t&&t.length>0)break;i++}if(i===e.length)return console.log("Empty merge decision (no diffs)!"),null;let r=e[i],l=r[0].op,n=r[0].key;for(let t of e)if(t&&t.length>0)for(let e of t)if(e.op!==l||e.key!==n)return null;if("patch"===l){if(!0!==t)for(let t of e)if(t&&t.length>0&&(1!==t.length||!t[0].diff||1!==t[0].diff.length))return null;let i=[];for(let t of e)t&&t.length>0?i.push(t[0].diff):i.push(null);return{diffs:i,key:n}}return null}function c(e,t){for(let i of t.reverse())e=[r.opPatch(i,e)];return e}function f(e,t){for(let i of t)e=e[i];return e}function h(e,t){return e&&t?e.concat(t):e?e.slice():t?t.slice():[]}function p(e,t){let i=t.action;if("base"===i)return[];if("local"===i||"either"===i)return t.localDiff?t.localDiff.slice():[];if("remote"===i)return t.remoteDiff?t.remoteDiff.slice():[];if("custom"===i)return t.customDiff?t.customDiff.slice():[];if("local_then_remote"===i)return h(t.localDiff,t.remoteDiff);if("remote_then_local"===i)return h(t.remoteDiff,t.localDiff);if("clear"===i){let i=null;if("object"!=typeof e)throw new TypeError("Can only use `'clear'` action on objects/dicts");for(let e of h(t.localDiff,t.remoteDiff))if(i){if(i!==e.key)throw new Error("Cannot combine diffs with different keys")}else i=e.key;if(i){let n=r.opReplace(i,(l=e[i])instanceof Array?[]:"string"==typeof l?"":null===l||s.valueIn(typeof l,["number","boolean"])?null:{});return n.source={decision:t,action:"custom"},[n]}return[]}if("clear_parent"===i){if(Array.isArray(e)){let i=r.opRemoveRange(0,e.length);return i.source={decision:t,action:"custom"},[i]}if("string"==typeof e){let i=s.splitLines(e).length,l=r.opRemoveRange(0,i);return l.source={decision:t,action:"custom"},[l]}{let i=[];for(let l of e){let e=r.opRemove(l);e.source={decision:t,action:"custom"},i.push(e)}return i}}throw new Error('The action "'+i+'" is not defined');var l}function g(e,t){for(let i=0;i<t.length;++i){if("string"==typeof e)return[t.slice(0,i),t.slice(i)];e=e[t[i]]}return[t,null]}function m(e,t){let i=[],r=null;for(let l=0;l<t.length;++l){let n,o=e[t[l]].path,a=e[t[l]].diff;if(i=i.concat(a),n=l===t.length-1?r:e[t[l+1]].path,!s.isPrefixArray(n,o)){let r=m(e,t.slice(l+1));n=e[t[t.length-1]].path;let a=s.findSharedPrefix(o,n),d=a?a.length:0;i=c(i,o.slice(d)).concat(c(r,n.slice(d)));break}null!==n&&(i=c(i,o.slice(n.length)),r=n)}return i}t.MergeDecision=a,t.decisionPathSortKey=d,t.decisionSortKey=function(e,t){return d(e.absolutePath,t.absolutePath)},t.addSorted=function(e,t,i){let r=0;for(;r<e.length;++r){let l=d(e[r].absolutePath,t.absolutePath);if(l>0)return void e.splice(r,0,t);if(void 0!==i&&0===l){let l=null;for(let t of e[r].diffs)if(t)for(let e of t)(!l||e.key<l)&&(l=e.key);if(i===l)throw new Error("Shouldn't have multiple decisions with diff on same key");if(null===l||i<l)return void e.splice(r,0,t)}}e.push(t)},t.popPath=u,t.pushPath=c,t.resolveCommonPaths=function(e){for(let t of e){let e=t.diffs,i=t.absolutePath||[],r=u(e,!0);for(;r;)i.push(r.key),e=r.diffs,r=u(e,!0);t.absolutePath=i,t.diffs=e}},t.applyDecisions=function(e,t){let i=s.deepCopy(e),r=null,l=null,o=null,a=null,d=[],u=!1;for(let e of t){let t=g(i,e.localPath),f=t[0],h=t[1];if(s.arraysEqual(f,r))if(u);else{"clear_parent"===e.action&&(u=!0,d=[]);let t=p(a,e);h&&(t=c(t,h)),d=d.concat(t)}else{null!==r&&(null===l?i=n.patch(a,d):l[o]=n.patch(a,d)),r=f.slice(),a=i,l=null,o=null;for(let e of f)l=a,a=a[e],o=e;d=p(a,e),h&&(d=c(d,h)),u="clear_parent"===e.action}}return null!==r&&(null===l?i=n.patch(a,d):l[o]=n.patch(a,d)),i},t.buildDiffs=function(e,t,i){let r={},n=[],s="local"===i,o="merged"===i;s||o||console.assert("remote"===i);for(let i of t){let t=null,a=g(e,i.localPath),d=a[0],u=a[1];if(o)t=p(f(e,d),i);else if(t=s?i.localDiff:i.remoteDiff,null===t)continue;let h="/"+d.join("/");if(r.hasOwnProperty(h))if(u){let e=l.getSubDiffByKey(r[h].diff,u[0]);e?e.push.apply(e,t):(t=c(t,u),r[h].diff.push(t[0]))}else r[h].diff=r[h].diff.concat(t);else u&&(t=c(t,u)),r[h]={diff:t,path:d},n.push(h)}return 0===Object.keys(r).length?null:(r.hasOwnProperty("/")||(r["/"]={diff:[],path:[]},n.push("/")),m(r,n))},t.pushPatchDecision=function(e,t){let i=new a(e);for(let e of t.slice().reverse()){if(0===i.absolutePath.length)throw new Error("Cannot remove key from empty decision path: "+e+", "+i);let t=i.absolutePath.pop();if(t!==e)throw Error("Cannot push a patch that doesn't correspond to a key in the decision path! Key: "+e+"; Remaining path: "+i.absolutePath.concat([t]));let l=i.localDiff&&i.localDiff.length>0,n=i.remoteDiff&&i.remoteDiff.length>0,s=i.customDiff&&i.customDiff.length>0;i.localDiff=l?[r.opPatch(e,i.localDiff)]:null,i.remoteDiff=n?[r.opPatch(e,i.remoteDiff)]:null,i.customDiff=s?[r.opPatch(e,i.customDiff)]:null}return i},t.filterDecisions=function(e,t,i,r){let l=[];i=i||0;for(let n of e)void 0!==r&&n.absolutePath.length>r||s.isPrefixArray(t,n.absolutePath.slice(i))&&(n.level=i+t.length,l.push(n));return l}},8580:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellMergeModel=void 0;const r=i(2004),l=i(6168),n=i(4526),s=i(3127),o=i(1604),a=i(8787),d=i(8439),u=i(8049),c=i(1833),f=i(1156);class h extends c.ObjectMergeModel{constructor(e,t,i){super(e,[],i,["source","metadata","outputs","execution_count"]),this.deleteCellChanged=new l.Signal(this),this._clearOutputs=!1,this.clearOutputsChanged=new l.Signal(this),this.onesided=!1,this._deleteCell=!1,this.processDecisions(t)}get deleteCell(){return this._deleteCell}set deleteCell(e){this._deleteCell!==e&&(this._deleteCell=e,this.deleteCellChanged.emit(e))}get clearOutputs(){return this._clearOutputs}set clearOutputs(e){this._clearOutputs!==e&&(this._clearOutputs=e,this.clearOutputsChanged.emit(e))}get agreedSource(){return!!this.local&&!!this.remote&&this.local.source.remote===this.remote.source.remote}get agreedMetadata(){return!(!this.local||!this.remote)&&this.local.metadata.remote===this.remote.metadata.remote}get agreedOutputs(){if(!this.local||!this.remote)return!1;let e=this.local.outputs,t=this.remote.outputs;if(!d.hasEntries(e)||!d.hasEntries(t))return!d.hasEntries(e)&&!d.hasEntries(t);if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(JSON.stringify(e[i].remote)!==JSON.stringify(t[i].remote))return!1;return!0}get agreedCell(){return this.agreedSource&&this.agreedMetadata&&this.agreedOutputs}get conflicted(){for(let e of this.decisions)if(e.conflict)return!0;return!1}hasConflictsOn(e){let t=o.filterDecisions(this.decisions,[e],2);for(let e of t)if(e.conflict)return!0;return!1}get sourceConflicted(){return this.hasConflictsOn("source")}get metadataConflicted(){return this.hasConflictsOn("metadata")}get outputsConflicted(){return this.hasConflictsOn("outputs")}clearOutputConflicts(){let e=o.filterDecisions(this.decisions,["outputs"],2);for(let t of e)t.conflict=!1}getExecutionCountDecision(){let e=o.filterDecisions(this.decisions,["cells"],0,2);for(let t of e)if(null!==n.getDiffEntryByKey(t.localDiff,"execution_count")||null!==n.getDiffEntryByKey(t.remoteDiff,"execution_count")||null!==n.getDiffEntryByKey(t.customDiff,"execution_count"))return t;return null}serialize(){if(this.deleteCell)return null;if(null===this.base){if(this.decisions.length>1||!this.merged.added)throw new f.NotifyUserError("Invalid cell decision");let e,t=this.decisions[0];if("local"===t.action||"either"===t.action){if(!t.localDiff)throw new f.NotifyUserError("Invalid cell decision");e=t.localDiff[0]}else if("remote"===t.action){if(!t.remoteDiff)throw new f.NotifyUserError("Invalid cell decision");e=t.remoteDiff[0]}else{if("custom"!==t.action)throw new f.NotifyUserError("Invalid cell decision");if(!t.customDiff)throw new f.NotifyUserError("Invalid cell decision");e=t.customDiff[0]}if("addrange"!==e.op)throw new f.NotifyUserError("Invalid cell decision");return e.valuelist[0]}let e=[];for(let t of this.decisions){let i=new o.MergeDecision(t);i.level=2,e.push(i)}let t=o.applyDecisions(this.base,e),i=t.source;return Array.isArray(i)&&(i=i.join("")),i!==this._merged.source.remote&&(console.warn("Serialized outputs doesn't match model value! Keeping the model value."),t.source=d.splitLines(this._merged.source.remote)),this.clearOutputs&&r.isCode(t)&&(t.outputs=[]),t}processDecisions(e){if(1===e.length&&d.arraysEqual(e[0].absolutePath,["cells"])){let t=e[0];0===(e=this.applyCellLevelDecision(t)).length&&this.decisions.push(t)}for(let t of e){if(t.level=2,t.absolutePath.length<2||"cells"!==t.absolutePath[0])throw new Error("Not a valid path for a cell decision");if(2===t.absolutePath.length&&(d.hasEntries(t.localDiff)||d.hasEntries(t.remoteDiff))){let e=o.pushPatchDecision(t,t.absolutePath.slice(1,2)),i=d.hasEntries(e.localDiff)?e.localDiff[0]:null,r=d.hasEntries(e.remoteDiff)?e.remoteDiff[0]:null,l=this.splitPatch(e,i,r);for(let e of l)e.level=2,this.decisions.push(e)}else this.decisions.push(t)}}applyCellLevelDecision(e){let t=[];if(console.assert(!this.onesided,"Cannot have multiple cell decisions on one cell!"),this.onesided=!0,d.hasEntries(e.localDiff))if(d.hasEntries(e.remoteDiff))if(console.assert(d.hasEntries(e.localDiff)&&d.hasEntries(e.remoteDiff)),console.assert(1===e.localDiff.length&&1===e.remoteDiff.length),e.localDiff[0].op===e.remoteDiff[0].op)if(null===this.base){let t=e.localDiff[0].valuelist[0];this._local=s.createAddedCellDiffModel(t,this.mimetype),this._remote=s.createAddedCellDiffModel(t,this.mimetype),this._merged=s.createAddedCellDiffModel(t,this.mimetype)}else this._local=s.createDeletedCellDiffModel(this.base,this.mimetype),this._remote=s.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=s.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=d.valueIn(e.action,["local","remote","either"]);else{let i=[e.localDiff[0].op,e.remoteDiff[0].op];if(console.assert(d.valueIn("removerange",i)&&d.valueIn("patch",i)),null===this.base)throw new Error("Invalid merge decision, cannot have null base for deleted cell: "+e);"removerange"===i[0]?(this._local=s.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell="local"===e.action,t=t.concat(this.splitPatch(e,null,e.remoteDiff[0]))):(this._remote=s.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell="remote"===e.action,t=t.concat(this.splitPatch(e,e.localDiff[0],null))),o.resolveCommonPaths(t)}else{if(this._remote=null,!e.localDiff||1!==e.localDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.localDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._local=s.createAddedCellDiffModel(i,this.mimetype),this._merged=s.createAddedCellDiffModel(i,this.mimetype)}else this._local=s.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=s.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=d.valueIn(e.action,["local","either"])}else{if(this._local=null,!e.remoteDiff||1!==e.remoteDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.remoteDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._remote=s.createAddedCellDiffModel(i,this.mimetype),this._merged=s.createAddedCellDiffModel(i,this.mimetype)}else this._remote=s.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=s.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=d.valueIn(e.action,["remote","either"])}return t}splitPatch(e,t,i){let r=!!t&&d.hasEntries(t.diff),l=!!i&&d.hasEntries(i.diff);if(!r&&!l)return[];let s=r?t.diff:null,a=l?i.diff:null,u=[],c=[];if(r)for(let e of s)c.push(e.key);if(l)for(let e of a)c.push(e.key);if(c=c.filter(d.unique),r&&l&&t.key!==i.key)throw new Error("Different keys of patch ops given to `splitPatch`.");let h=r?t.key:i.key;for(let t of c){if(this._whitelist&&!d.valueIn(t,this._whitelist))throw new f.NotifyUserError('Currently not able to handle decisions on variable "'+t+'"');let i=n.getDiffEntryByKey(s,t),r=n.getDiffEntryByKey(a,t),l=!(i&&r),c=e.action;"base"===c&&l&&(c=i?"local":"remote"),u.push(new o.MergeDecision(e.absolutePath.concat([h]),i?[i]:null,r?[r]:null,c,e.conflict))}let p=this.splitOnSourceChunks(u);return o.resolveCommonPaths(p),d.stableSort(p,o.decisionSortKey)}splitOnSourceChunks(e){let t=[];for(let i=0;i<e.length;++i){let r=e[i];if("source"===r.absolutePath[2]){let e=this.base.source;Array.isArray(e)||(e=d.splitLines(e)),r.level=3;let i=u.splitMergeDecisionsOnChunks(e,[r]);o.resolveCommonPaths(i),t=t.concat(d.stableSort(i,o.decisionSortKey))}else t.push(r)}return t}createDiffModel(e){if(null===this.base)throw new Error("Cannot create a patched or unchanged diff model with null base!");return e&&e.length>0?s.createPatchedCellDiffModel(this.base,e,this.mimetype):s.createUnchangedCellDiffModel(this.base,this.mimetype)}createMergedDiffModel(){if(null===this.base)throw new Error("Cannot create a patched or unchanged merged diff model with null base!");return function(e,t,i,l,u){for(let e of t)if(0===e.localPath.length){let t=o.popPath(e.diffs,!0);null!==t&&(e.diffs=t.diffs,e.pushPath(t.key))}let f=new c.DecisionStringDiffModel(e.source,o.filterDecisions(t,["source"],2),[i?i.source:null,l?l.source:null]);s.setMimetypeFromCellType(f,e,u);let h=new c.DecisionStringDiffModel(e.metadata,o.filterDecisions(t,["metadata"],2),[i?i.metadata:null,l?l.metadata:null]),p=null,g=null;if(r.isCode(e)){if(e.outputs){let i,r=e.outputs,l=o.filterDecisions(t,["outputs"],2),n=o.buildDiffs(r,l,"merged");i=n&&n.length>0?a.patch(r,n):r,p=s.makeOutputModels(r,i,n)}let i=e.execution_count,r=o.filterDecisions(t,["cells"],0,2);for(let t of r)if(null!==n.getDiffEntryByKey(t.localDiff,"execution_count")||null!==n.getDiffEntryByKey(t.remoteDiff,"execution_count")||null!==n.getDiffEntryByKey(t.customDiff,"execution_count")){t.level=2;let r=o.buildDiffs(e,[t],"merged"),l=d.hasEntries(r)?r[0]:null;g=s.createImmutableModel(i,i,l)}}return new s.CellDiffModel(f,h,p,g,e.cell_type)}(this.base,this.decisions,this.local,this.remote,this.mimetype)}}t.CellMergeModel=h},1833:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectMergeModel=t.DecisionStringDiffModel=void 0;const r=i(8799),l=i(3127),n=i(1604),s=i(8049),o=i(8787);class a extends l.StringDiffModel{constructor(e,t,i,r,l,n){super(o.stringifyAndBlankNull(e),"",[],[],r,l,n),this.rawBase=e,this.decisions=t,this._outdated=!0,this._sourceModels=i,this._update()}get additions(){return this._outdated&&this._update(),this._additions}set additions(e){this._additions=e}get deletions(){return this._outdated&&this._update(),this._deletions}set deletions(e){this._deletions=e}get remote(){return this._outdated&&this._update(),this._remote}set remote(e){this._remote=e}invalidate(){this._outdated=!0}get invalid(){return this._outdated}getLineChunks(){let e=[this];e=e.concat(this._sourceModels);let t=new s.LineChunker,i=new l.StringDiffModel.SyncedDiffIter(e);for(let e=i.next();void 0!==e;e=i.next())if(i.currentModel()===this)t.addDiff(e.range,e.isAddition);else{if(!e.range.source||"base"!==e.range.source.decision.action)continue;t.addGhost(e.range,e.isAddition,i.currentOffset)}return t.chunks}_update(){this._outdated=!1;let e=n.buildDiffs(this.rawBase,this.decisions,"merged"),t=o.patchStringified(this.rawBase,e);this._additions=r.raw2Pos(t.additions,t.remote),this._deletions=r.raw2Pos(t.deletions,this.base||""),this._remote=t.remote}}t.DecisionStringDiffModel=a,t.ObjectMergeModel=class{constructor(e,t,i,r){this._finalized=!1,this.base=e,this.mimetype=i,this._whitelist=r||null,this.decisions=t}serialize(){return null===this.base?null:n.applyDecisions(this.base,this.decisions)}get local(){if(void 0===this._local){this._finalizeDecisions();let e=n.buildDiffs(this.base,this.decisions,"local");this._local=this.createDiffModel(e)}return this._local}get remote(){if(void 0===this._remote){this._finalizeDecisions();let e=n.buildDiffs(this.base,this.decisions,"remote");this._remote=this.createDiffModel(e)}return this._remote}get merged(){return void 0===this._merged&&(this._finalizeDecisions(),this._merged=this.createMergedDiffModel()),this._merged}get subModels(){return[this.local,this.remote,this.merged]}_finalizeDecisions(){if(!this._finalized){for(let e of this.decisions)"either"===e.action?(s.labelSource(e.localDiff,{decision:e,action:"either"}),s.labelSource(e.remoteDiff,{decision:e,action:"either"})):(s.labelSource(e.localDiff,{decision:e,action:"local"}),s.labelSource(e.remoteDiff,{decision:e,action:"remote"})),s.labelSource(e.customDiff,{decision:e,action:"custom"});this._finalized=!0}}}},5118:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),l=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),l(i(8580),t),l(i(1833),t),l(i(617),t),l(i(1522),t)},617:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataMergeModel=void 0;const r=i(3127),l=i(1833),n=i(1797);class s extends l.ObjectMergeModel{constructor(e,t){super(e,t,"application/json")}serialize(){if(!this.merged||null===this.merged.remote)throw new Error("Missing notebook metadata merge data.");return JSON.parse(this.merged.remote)}createDiffModel(e){if(e&&e.length>0)return r.createPatchStringDiffModel(this.base,e);{const e=n.JSONExt.deepCopy(this.base);return r.createDirectStringDiffModel(e,e)}}createMergedDiffModel(){return new l.DecisionStringDiffModel(this.base,this.decisions,[this.local,this.remote])}}t.MetadataMergeModel=s},1522:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookMergeModel=void 0;const r=i(8439),l=i(1604),n=i(8049),s=i(8787),o=i(8580),a=i(617);function d(e){return!!e&&2===e.length&&e[0].key===e[1].key}t.NotebookMergeModel=class{constructor(e,t){this.base=e;let i,r=this.constructor.preprocessDecisions(t);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=this.buildCellList(r);let n=l.filterDecisions(r,["metadata"]);this.metadata=new a.MetadataMergeModel(e.metadata,n),this.unsavedChanges=!1}static preprocessDecisions(e){let t=[];for(let i of e)t.push(new l.MergeDecision(i));t=function(e){let t=[];for(let i of e)if(r.arraysEqual(i.absolutePath,["cells"]))if(i.localDiff&&!i.remoteDiff)for(let e of i.localDiff){let r=new l.MergeDecision(i);r.localDiff=[e],t.push(r)}else if(i.remoteDiff&&!i.localDiff)for(let e of i.remoteDiff){let r=new l.MergeDecision(i);r.absolutePath=i.absolutePath.slice(),r.remoteDiff=[e],t.push(r)}else if(d(i.localDiff))if(d(i.remoteDiff)){let e=new l.MergeDecision(i);e.localDiff=i.localDiff.slice(0,1),e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new l.MergeDecision(i.absolutePath.slice(),i.localDiff.slice(1),i.remoteDiff.slice(1),"either"))}else{let e=new l.MergeDecision(i);e.localDiff=i.localDiff.slice(0,1),t.push(e),t.push(new l.MergeDecision(i.absolutePath.slice(),i.localDiff.slice(1),[],"local",i.conflict))}else if(d(i.remoteDiff)){let e=new l.MergeDecision(i);e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new l.MergeDecision(i.absolutePath.slice(),[],i.remoteDiff.slice(1),"remote",i.conflict))}else if(r.hasEntries(i.remoteDiff)&&r.hasEntries(i.localDiff))if("addrange,removerange"===[i.remoteDiff[0].op,i.localDiff[0].op].sort().join(",")){let e=new l.MergeDecision(i);e.action="local",e.localDiff=i.localDiff.slice(),e.remoteDiff=null,t.push(e);let r=new l.MergeDecision(i);r.action="remote",r.localDiff=null,r.remoteDiff=i.remoteDiff.slice(),t.push(r)}else t.push(i);else t.push(i);else t.push(i);return l.resolveCommonPaths(t),t}(t),t=function(e){let t=[],i=function(e,t,i,r){let n=new l.MergeDecision(e.absolutePath.slice(),null,null,e.action,e.conflict),s=[{key:t,op:"removerange",length:1}];return console.assert(i||r),i&&(n.localDiff=s),r&&(n.remoteDiff=s),n};for(let l of e){if(!r.arraysEqual(l.absolutePath,["cells"])){t.push(l);continue}let e=r.hasEntries(l.localDiff)?l.localDiff[l.localDiff.length-1]:null,n=r.hasEntries(l.remoteDiff)?l.remoteDiff[l.remoteDiff.length-1]:null;if(e&&!n||n&&!e){let r=e||n;if(!("removerange"===r.op&&r.length>1)){t.push(l);continue}for(let s=0;s<r.length;++s)t.push(i(l,r.key+s,!!e,!!n))}else if(n&&e){if("removerange"!==e.op&&"removerange"!==n.op){t.push(l);continue}if(e.op===n.op){let r=e.key,s=n.key,o=Math.min(r,s),a=r+e.length,d=s+n.length,u=Math.max(a,d);for(let e=o;e<u;++e){let n=e>=r&&e<a,o=e>=s&&e<d;t.push(i(l,e,n,o))}}else{let r="removerange"===e.op,s=r?e:n,o=r?n:e;console.assert("patch"===o.op);let a=o.key,d=s.key;for(let e=d;e<d+s.length;++e){let n=i(l,e,r,!r);e===a&&(r?n.remoteDiff=[o]:n.localDiff=[o]),t.push(n)}}}}return t}(t),t=function(e){let t=[],i=function(e,t,i,n){let s=new l.MergeDecision(e.absolutePath.slice(),null,null,e.action,e.conflict);if(i&&!r.hasEntries(e.localDiff)||!i&&!r.hasEntries(e.remoteDiff))throw new Error("Invalid input: "+e);let o=[{key:(i?e.localDiff:e.remoteDiff)[0].key,op:"addrange",valuelist:[t]}];return console.assert(i||n),i&&(s.localDiff=o),n&&(s.remoteDiff=o),s};for(let l of e){if(!r.arraysEqual(l.absolutePath,["cells"])){t.push(l);continue}let e=!0;if(l.localDiff)for(let t of l.localDiff)if("addrange"!==t.op){e=!1;break}if(l.remoteDiff)for(let t of l.remoteDiff)if("addrange"!==t.op){e=!1;break}if(!e){t.push(l);continue}let n=l.localDiff&&1===l.localDiff.length?l.localDiff[0]:null,o=l.remoteDiff&&1===l.remoteDiff.length?l.remoteDiff[0]:null;if(n&&!o||o&&!n){let e=(n||o).valuelist;for(let r of e)t.push(i(l,r,!!n,!!o))}else if(n&&o)if(s.stringify(n.valuelist)===s.stringify(o.valuelist))for(let e of n.valuelist)t.push(i(l,e,!0,!0));else{let e=n.key;if(console.assert(e===o.key),"remote_then_local"===l.action){for(let e of o.valuelist){const r=i(l,e,!1,!0);r.action="remote",t.push(r)}for(let e of n.valuelist){const r=i(l,e,!0,!1);r.action="local",t.push(r)}}else{for(let e of n.valuelist){const r=i(l,e,!0,!1);r.action="local",t.push(r)}for(let e of o.valuelist){const r=i(l,e,!1,!0);r.action="remote",t.push(r)}}}}return t}(t),t=function(e){let t=[];for(let i of e){if(!r.arraysEqual(i.absolutePath,["cells"])){t.push(i);continue}let e=r.hasEntries(i.localDiff)?i.localDiff:null,n=r.hasEntries(i.remoteDiff)?i.remoteDiff:null;if(e&&e.length<2&&n&&n.length<2){t.push(i);continue}let s=Math.max(e?e.length:0,n?n.length:0);for(let r=0;r<s;++r){let s=e&&r<e.length?[e[r]]:null,o=n&&r<n.length?[n[r]]:null;t.push(new l.MergeDecision(i.absolutePath.slice(),s,o,i.action,i.conflict))}}return r.stableSort(t,l.decisionSortKey)}(t),l.resolveCommonPaths(t);for(let e of t)"either"===e.action?(n.labelSource(e.localDiff,{decision:e,action:"either"}),n.labelSource(e.remoteDiff,{decision:e,action:"either"})):(n.labelSource(e.localDiff,{decision:e,action:"local"}),n.labelSource(e.remoteDiff,{decision:e,action:"remote"})),n.labelSource(e.customDiff,{decision:e,action:"custom"});return t}serialize(){let e={};for(let t in this.base)r.valueIn(t,["cells","metadata"])||(e[t]=this.base[t]);e.metadata=this.metadata.serialize();let t=[];for(let e of this.cells){let i=e.serialize();null!==i&&t.push(i)}return e.cells=t,e}get decisions(){let e=[];for(let t of this.cells)e=e.concat(t.decisions);return e=e.concat(this.metadata.decisions),e}get conflicts(){let e=[];for(let t of this.decisions)t.conflict&&e.push(t);return e}buildCellList(e){let t=[];for(let e of this.base.cells)t.push({base:e,decisions:[]});let i=0;for(let l of e){let e=l.absolutePath;if(!(e.length<1||"cells"!==e[0]))if(r.arraysEqual(e,["cells"])){let e=null,r=!1;for(let n of l.diffs)if(n&&0!==n.length&&(e=n[0].key,"addrange"===n[0].op)){let n=i+e;t.splice(n,0,{base:null,decisions:[l]}),i+=1,r=!0;break}if(r)continue;if(null===e)throw new Error("No index could be found for merge decision!");t[e+i].decisions.push(l)}else t[e[1]].decisions.push(l)}let l=[];for(let e of t)l.push(new o.CellMergeModel(e.base,e.decisions,this.mimetype));return l}}},4007:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellMergeWidget=t.CELLMERGE_CLASS=void 0;const r=i(2004),l=i(3706),n=i(3788),s=i(3642),o=i(111),a=i(8439),d=i(3127),u=i(7842),c=i(5168),f=i(7513),h=i(9156);t.CELLMERGE_CLASS="jp-Cell-merge";const p="jp-mod-todelete",g="jp-mod-clearoutputs",m="jp-Cellrow-source",y="jp-Cellrow-outputs",D="jp-conflicted-outputs";class C extends l.Panel{constructor(e,i,r){super(),this.sourceView=null,this.metadataView=null,this.outputViews=null,this.addClass(t.CELLMERGE_CLASS),this._model=e,this._rendermime=i,this.mimetype=r,this.init()}static createMergeView(e,t,i,r,l=!1){let n=null;return i instanceof d.StringDiffModel&&(n=o.createNbdimeMergeView(t,e,i,l)),n}static getOutputs(e,t){let i=[];for(let r of e)!0===t?r.base&&i.push(r.base):r.remote&&i.push(r.remote);return i}validateMerged(e){if(this.sourceView&&this.sourceView instanceof o.MergeView){let t=this.sourceView.getMergedValue(),i=a.splitLines(t);e.source!==i&&(e.source=i)}if(this.metadataView&&this.metadataView instanceof o.MergeView){let t=this.metadataView.getMergedValue();JSON.stringify(e.metadata)!==t&&(e.metadata=JSON.parse(t))}if(r.isCode(e)&&this.outputViews){let t=this.outputViews.merged.toJSON();e.outputs=t}return e}init(){let e=this.model,t=h.MERGE_CLASSES.slice();this.createHeader(),e.merged.unchanged&&e.local&&e.local.unchanged&&e.remote&&e.remote.unchanged&&this.addClass(h.UNCHANGED_MERGE_CLASS);let i=e.local&&e.local.added,r=e.local&&e.local.deleted,s=e.remote&&e.remote.added,o=e.remote&&e.remote.deleted;if(i&&!s||r&&!o?this.headerTitle=i?"Cell added locally":"Cell deleted locally":(s&&!i||o&&!r)&&(this.headerTitle=s?"Cell added remotely":"Cell deleted remotely"),null===e.local||null===e.remote||e.local.unchanged&&e.remote.unchanged&&e.merged.unchanged||e.local.added!==e.remote.added||e.local.deleted&&e.remote.unchanged||e.local.unchanged&&e.remote.deleted||e.local.added&&e.agreedCell||e.local.deleted&&e.remote.deleted){t=t.slice(1,3);let n=u.CellDiffWidget.createView(e.merged.source,e.merged,t,this._rendermime);if(i&&!s||r&&!o?this.addClass(h.ONEWAY_LOCAL_CLASS):s&&!i||o&&!r?this.addClass(h.ONEWAY_REMOTE_CLASS):r&&o?(this.headerTitle="Deleted on both sides",this.addClass(h.TWOWAY_DELETION_CLASS)):i&&s&&(this.headerTitle="Added on both sides",this.addClass(h.TWOWAY_ADDITION_CLASS)),n.addClass(m),this.addWidget(n),a.hasEntries(e.merged.outputs)){let i=new l.Panel;for(let r of e.merged.outputs)n=u.CellDiffWidget.createView(r,e.merged,t,this._rendermime),i.addWidget(n);i.addClass(y),this.addWidget(i)}}else{let i=e.getExecutionCountDecision();if(i&&"clear"===i.action){let e=new c.FlexPanel({direction:"left-to-right"});e.addClass("jp-Cellrow-executionCount");let t=new l.Widget;t.node.innerText="Execution count will be cleared.",e.addWidget(t),this.addWidget(e)}let r=null;if(r=e.local&&e.local.source.unchanged&&e.remote&&e.remote.source.unchanged&&e.merged.source.unchanged?u.CellDiffWidget.createView(e.merged.source,e.merged,t,this._rendermime):C.createMergeView(e.local?e.local.source:null,e.remote?e.remote.source:null,e.merged.source,t),null===r)throw new Error("Was not able to create merge view for cell!");this.sourceView=r,r.addClass(m),this.addWidget(r);let s=!1,o=!1;for(let t of e.subModels)if(t&&!t.deleted&&(s=s||!!t.metadata&&!t.metadata.unchanged,t.outputs&&t.outputs.length>0))for(let e of t.outputs)o=o||!e.unchanged;if(s){let i=C.createMergeView(e.local?e.local.metadata:null,e.remote?e.remote.metadata:null,e.merged.metadata,t,!0);if(null===i)throw new Error("Was not able to create merge view for cell metadata!");this.metadataView=i;let r=new l.Panel;r.addWidget(i);let s="Metadata changed",o=new n.CollapsiblePanel(r,s,!0);o.addClass("jp-Cellrow-metadata"),this.addWidget(o)}if(o||a.hasEntries(e.merged.outputs)){let t=C.getOutputs(e.local?e.local.outputs:[],!0),i=C.getOutputs(e.local?e.local.outputs:[]),r=C.getOutputs(e.remote?e.remote.outputs:[]),s=C.getOutputs(e.merged.outputs),a=new f.RenderableOutputsMergeView(s,h.MERGE_CLASSES,this._rendermime,t,r,i);this.outputViews=a;let d=o?e.outputsConflicted?"Outputs conflicted":"Outputs changed":"Outputs unchanged",u=new n.CollapsiblePanel(a,d,!o);if(u.addClass(y),e.outputsConflicted){u.addClass(D);let t=new l.Widget;t.addClass("jp-conflicted-outputs-button");let i=t.node,r=document.createElement("button");r.onclick=i=>{0===i.button&&(e.clearOutputConflicts(),u.removeClass(D),u.headerTitle="Outputs changed",i.preventDefault(),i.stopPropagation(),t.parent=null)},r.innerText="Mark resolved",i.appendChild(r),u.header.insertWidget(1,t)}this.addWidget(u)}}}createHeader(){let e=new l.Panel;e.addClass("jp-Merge-cellHeader");let t=s.DragPanel.createDefaultHandle();if(e.addWidget(t),t=new l.Widget,this.headerTitleWidget=t,t.addClass("jp-Merge-cellHeader-title"),e.addWidget(t),a.hasEntries(this.model.merged.outputs)){let t=this._createClearOutputToggle();e.addWidget(t)}let i=this._createDeleteToggle();e.addWidget(i),this.addWidget(e),this.header=e}_createClearOutputToggle(){let{checkbox:e,widget:t}=h.createCheckbox(this.model.clearOutputs,"Clear outputs");return this.model.clearOutputs&&this.addClass(g),e.onchange=t=>{this.model.clearOutputs=e.checked,this.toggleClass(g,e.checked)},this.model.clearOutputsChanged.connect(((t,i)=>{e.checked=i,this.toggleClass(g,i)})),t.addClass("jp-Merge-clearOutput-toggle"),t}_createDeleteToggle(){let{checkbox:e,widget:t}=h.createCheckbox(this.model.deleteCell,"Delete cell");return this.model.deleteCell&&this.addClass(p),e.onchange=t=>{this.model.deleteCell=e.checked,this.toggleClass(p,e.checked)},this.model.deleteCellChanged.connect(((t,i)=>{e.checked=i,this.toggleClass(p,i)})),t.addClass("jp-Merge-delete-cell-toggle"),t}set headerTitle(e){this.headerTitleWidget.node.innerText=e}get model(){return this._model}}t.CellMergeWidget=C},9156:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCheckbox=t.MERGE_CLASSES=t.TWOWAY_DELETION_CLASS=t.TWOWAY_ADDITION_CLASS=t.ONEWAY_REMOTE_CLASS=t.ONEWAY_LOCAL_CLASS=t.UNCHANGED_MERGE_CLASS=void 0;const r=i(3706);t.UNCHANGED_MERGE_CLASS="jp-Merge-unchanged",t.ONEWAY_LOCAL_CLASS="jp-Merge-oneway-local",t.ONEWAY_REMOTE_CLASS="jp-Merge-oneway-remote",t.TWOWAY_ADDITION_CLASS="jp-Merge-twoway-addition",t.TWOWAY_DELETION_CLASS="jp-Merge-twoway-deletion",t.MERGE_CLASSES=["jp-Merge-base","jp-Merge-local","jp-Merge-remote","jp-Merge-merged"],t.createCheckbox=function(e,t,i=!1){let l=document.createElement("input");l.setAttribute("type","checkbox"),l.checked=e,l.indeterminate=i;let n=new r.Widget,s=document.createElement("label");return s.innerHTML=t,s.insertBefore(l,s.childNodes[0]),n.node.appendChild(s),{checkbox:l,widget:n}}},3285:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedCellsWidget=t.CellsDragDrop=void 0;const r=i(3706),l=i(6168),n=i(3642),s="jp-conflicted-cells";class o extends n.FriendlyDragDrop{constructor(e){super(e),this._moved=new l.Signal(this),this.addClass("jp-merge-celldragdrop")}move(e,t){let i=e[0],r=t[0],l=e[1],n=t[1],s=n;if(i===r)if(n>l)s-=1,t[1]=s;else if(l===n)return;let o=this.friends[r],a=this.friends[i];const d=a.widgets[l];o.insertWidget(s,d),this._moved.emit({widget:d,oldParent:a,before:s>0?o.widgets[s-1]:null,after:s<o.widgets.length?o.widgets[s+1]:null})}get moved(){return this._moved}}t.CellsDragDrop=o;class a extends r.Panel{constructor(){super(),this._resolved=new l.Signal(this),this.addClass(s),this.header=new r.Widget,this.header.addClass("jp-conflicted-cells-header"),this.header.node.innerText="Conflicting cell operations";let e=document.createElement("button");e.innerText="Resolve Conflict",e.onclick=this.onResolve.bind(this),e.className="jp-conflicted-cells-button",this.header.node.appendChild(e),this.addWidget(this.header),this.cells=new o,this.addWidget(this.cells)}onResolve(e){for(let e of this.cells.widgets){let t=e.model;if(t.onesided&&t.conflicted)for(let e of t.decisions)e.conflict=!1}this.removeClass(s),this.header.parent=null,this.header.dispose(),this._resolved.emit(void 0)}dispose(){this.cells.parent=null,this.cells=null,this.header&&(this.header.parent=null),this.header=null,super.dispose()}get resolved(){return this._resolved}}t.ChunkedCellsWidget=a},8041:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),l=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),l(i(4007),t),l(i(1554),t),l(i(9281),t)},9281:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataMergeWidget=void 0;const r=i(3706),l=i(111),n=i(3788);class s extends r.Panel{constructor(e){super(),this._model=e,this.addClass("jp-Metadata-diff"),this.init()}init(){let e=this._model;this.view=l.createNbdimeMergeView(e.remote,e.local,e.merged);let t=new n.CollapsiblePanel(this.view,"Notebook metadata changed",!0);this.addWidget(t)}validateMerged(e){let t=this.view.getMergedValue();return JSON.stringify(e)!==t&&(e=JSON.parse(t)),e}}t.MetadataMergeWidget=s},1554:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookMergeWidget=void 0;const r=i(3706),l=i(8439),n=i(5168),s=i(9281),o=i(4007),a=i(9156),d=i(3285);class u extends r.Panel{constructor(e,t){super(),this.metadataWidget=null,this._model=e,this._rendermime=t,this.addClass("jp-Notebook-merge")}init(){let e=this._model,t=this._rendermime,i=Promise.resolve();this.addWidget(new c(e)),i=i.then((()=>{e.metadata&&(this.metadataWidget=new s.MetadataMergeWidget(e.metadata),this.addWidget(this.metadataWidget))})),i=i.then((()=>{this.cellContainer=new d.CellsDragDrop({acceptDropsFromExternalSource:!0}),this.cellContainer.setFriendlyGroup(d.CellsDragDrop.makeGroup()),this.cellContainer.moved.connect(this.onDragDropMove,this),this.addWidget(this.cellContainer)})),this.cellWidgets=[];let r=null;for(let l of e.cells)i=i.then((()=>new Promise((i=>{let n=new o.CellMergeWidget(l,t,e.mimetype);this.cellWidgets.push(n),l.onesided&&l.conflicted?(null===r&&(r=new d.ChunkedCellsWidget,r.cells.moved.connect(this.onDragDropMove,this),r.resolved.connect(this.onChunkResolved,this),this.cellContainer.addToFriendlyGroup(r.cells)),r.cells.addWidget(n)):(null!==r&&(this.cellContainer.addWidget(r),r=null),this.cellContainer.addWidget(n)),requestAnimationFrame((()=>{i()}))}))));return i=i.then((()=>{null!==r&&this.cellContainer.addWidget(r)})),i}validateMerged(e){let t=l.deepCopy(e);this.metadataWidget&&(t.metadata=this.metadataWidget.validateMerged(e.metadata));let i=0;for(let r of this.cellWidgets)r.model.deleteCell||(t.cells[i]=r.validateMerged(e.cells[i]),++i);return t}get model(){return this._model}onDragDropMove(e,t){let i,{widget:r,oldParent:l,before:n,after:s}=t,o=this._model.cells.indexOf(r.model);if(s)i=this._model.cells.indexOf(s.model);else{if(!n)throw new Error("Need either before or after");i=this._model.cells.indexOf(n.model)+1}if(i>o&&(i-=1),this._model.cells.splice(i,0,this._model.cells.splice(o,1)[0]),0===l.widgets.length&&l.parent.onResolve(),l!==this.cellContainer&&r.parent===this.cellContainer)for(let e of r.model.decisions)e.conflict=!1}onChunkResolved(e,t){let i=this.cellContainer.widgets.indexOf(e);for(;e.cells.widgets.length>0;)this.cellContainer.insertWidget(i++,e.cells.widgets[0]);e.parent=null,e.dispose()}}t.NotebookMergeWidget=u;class c extends n.FlexPanel{constructor(e){super({direction:"left-to-right"}),this.model=e,this.addClass("jp-Merge-notebook-controls");let t=!1;for(let i of e.cells)if(l.hasEntries(i.merged.outputs)){t=!0;break}t&&this.init_controls()}init_controls(){let e=a.createCheckbox(!1,"Clear <i>all</i> cell outputs");this.clearOutputsToggle=e.checkbox,this.addWidget(e.widget),e=a.createCheckbox(!1,"Clear <i>conflicted</i> cell outputs"),this.clearConflictedOutputsToggle=e.checkbox,this.addWidget(e.widget),this.updateOutputsToggles(),this.connectOutputsToggles()}connectOutputsToggles(){for(let e of this.model.cells)l.hasEntries(e.merged.outputs)&&e.clearOutputsChanged.connect(this.updateOutputsToggles,this);this.clearOutputsToggle.addEventListener("change",this),this.clearConflictedOutputsToggle.addEventListener("change",this)}disconnectOutputsToggles(){for(let e of this.model.cells)l.hasEntries(e.merged.outputs)&&e.clearOutputsChanged.disconnect(this.updateOutputsToggles,this);this.clearOutputsToggle.removeEventListener("change",this),this.clearConflictedOutputsToggle.removeEventListener("change",this)}handleEvent(e){switch(e.type){case"change":e.currentTarget===this.clearOutputsToggle?this.onClearAllOutputsChanged():e.currentTarget===this.clearConflictedOutputsToggle&&this.onClearConflictedOutputsChanged()}}onClearAllOutputsChanged(){this.disconnectOutputsToggles();try{let e=this.clearOutputsToggle.checked;for(let t of this.model.cells)l.hasEntries(t.merged.outputs)&&(t.clearOutputs=e)}finally{this.updateOutputsToggles(),this.connectOutputsToggles()}}onClearConflictedOutputsChanged(){this.disconnectOutputsToggles();try{let e=this.clearConflictedOutputsToggle.checked;for(let t of this.model.cells)l.hasEntries(t.merged.outputs)&&t.outputsConflicted&&(t.clearOutputs=e)}finally{this.updateOutputsToggles(),this.connectOutputsToggles()}}updateOutputsToggles(){let e,t;for(let i of this.model.cells){if(l.hasEntries(i.merged.outputs)){let r=i.clearOutputs;null===e||(void 0===e?e=r:e!==r&&(e=null)),i.outputsConflicted&&(null===t||(void 0===t?t=r:t!==r&&(t=null)))}if(null===t&&null===e)break}this.clearOutputsToggle.checked=!0===e,this.clearOutputsToggle.indeterminate=null===e,this.clearConflictedOutputsToggle.checked=!0===t,this.clearConflictedOutputsToggle.indeterminate=null===t,this.clearConflictedOutputsToggle.disabled=void 0===t,void 0===t?this.clearConflictedOutputsToggle.parentElement.setAttribute("disabled",""):this.clearConflictedOutputsToggle.parentElement.removeAttribute("disabled")}}},7513:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableOutputsMergeView=t.ReorderableOutputWidget=t.ReorderableOutputModel=void 0;const r=i(770),l=i(3706),n=i(3642),s=i(5168);class o extends r.OutputAreaModel{insert(e,t){this.list.insert(e,t)}move(e,t){this.list.move(e,t)}remove(e){return this.list.remove(e)}}t.ReorderableOutputModel=o;class a extends r.OutputArea{onModelChanged(e,t){let i=this.layout;switch(t.type){case"move":i.insertWidget(t.newIndex,i.widgets[t.oldIndex]);break;case"remove":i.removeWidgetAt(t.oldIndex);break;default:return super.onModelChanged(e,t)}}}t.ReorderableOutputWidget=a;class d extends n.DropPanel{constructor(){super({acceptDropsFromExternalSource:!0}),this.callback=null}findDropTarget(e){return e===this.node||this.node.contains(e)?this.node:null}processDrop(e,t){this.callback&&this.callback(e,t)}}class u extends n.DragDropPanel{constructor(e,t,i,l,n,s){if(super(),this.base=null,this.remote=null,this.local=null,this.addClass("jp-Merge-reorder-outputs"),!l!=!n||!l!=!s)throw new Error("Renderable outputs merge-view either takes only merged output or a full set of four output lists.");if(l){this.base=new r.OutputAreaModel;for(let e of l)this.base.add(e);this.remote=new r.OutputAreaModel;for(let e of n)this.remote.add(e);this.local=new r.OutputAreaModel;for(let e of s)this.local.add(e)}this.merged=new o;for(let t of e)this.merged.add(t);this.rendermime=i,this.panes=[],this.init(t)}static makeOutputsDraggable(e){let t=e.layout.iter();for(let e=t.next();void 0!==e;e=t.next())n.DragPanel.makeHandle(e)}static get deleteDrop(){if(!u._deleteDrop){let e=new d;e.addClass("jp-Merge-output-drop-delete");let t=document.createElement("i");t.className="fa fa-lg fa-trash-o",t.setAttribute("aria-hidden","true"),e.node.appendChild(t),e.node.style.position="absolute",u._deleteDrop=e}return u._deleteDrop}init(e){let t=new s.FlexPanel({direction:"left-to-right",evenSizes:!0});if(this.local){let i=new r.OutputArea({model:this.local,rendermime:this.rendermime});i.addClass(e[1]),t.addWidget(i),this.panes.push(i)}if(this.base){let i=new r.OutputArea({model:this.base,rendermime:this.rendermime});i.addClass(e[0]),t.addWidget(i),this.panes.push(i)}if(this.remote){let i=new r.OutputArea({model:this.remote,rendermime:this.rendermime});i.addClass(e[2]),t.addWidget(i),this.panes.push(i)}t.widgets.length>0&&(this.addWidget(t),t=new s.FlexPanel({direction:"left-to-right",evenSizes:!0})),this.mergePane=new a({model:this.merged,rendermime:this.rendermime}),this.mergePane.addClass(e[3]),t.addWidget(this.mergePane),this.panes.push(this.mergePane),this.addWidget(t);for(let e of this.panes)u.makeOutputsDraggable(e)}findDragTarget(e){if(null===e)return null;for(let t of this.panes){let i=n.findChild(t.node,e);if(null!==i)return i}return null}getIndexOfChildNode(e,t){for(let t of this.panes){let i=n.findChild(t.node,e);if(null!==i)return[this.panes.indexOf(t),super.getIndexOfChildNode(i,t.layout)]}return null}move(e,t){let i=e[0],r=t[0];if(this.panes[r]!==this.mergePane)return;let l=e[1],n=t[1],s=n;if(i===r)if(n>l)s-=1,t[1]=s;else if(l===n)return;let o=this.mergePane.model,a=this.panes[i].model;r!==i?o.insert(s,a.get(l)):o.move(l,s),u.makeOutputsDraggable(this.mergePane)}findDropTarget(e){return e===this.mergePane.node&&0===this.mergePane.model.length?this.mergePane.node:n.findChild(this.mergePane.node,e)}processDrop(e,t){if(e===u.deleteDrop.node){let[e,i]=t.mimeData.getData(n.MIME_INDEX);if(this.panes[e]!==this.mergePane)return;this.mergePane.model.remove(i),t.preventDefault(),t.stopPropagation(),t.dropAction="move"}else if(e===this.mergePane.node&&0===this.mergePane.model.length){let e=t.mimeData.getData(n.MIME_INDEX);this.move(e,[this.panes.indexOf(this.mergePane),0]),t.preventDefault(),t.stopPropagation(),t.dropAction="copy"}else super.processDrop(e,t)}getDragImage(e){let t=this.findDragTarget(e);if(t){let e=t.cloneNode(!0);return e.style.width=t.offsetWidth.toString()+"px",e.classList.add("jp-Merge-dragimage-output"),e}return null}startDrag(e,t,i){if(super.startDrag(e,t,i),n.findChild(this.mergePane.node,e)){let e=u.deleteDrop;e.callback=this.processDrop.bind(this);let t=this.mergePane.node.getBoundingClientRect();e.node.style.left="0",e.node.style.width=(t.left+window.pageXOffset).toString()+"px",e.node.style.top=(t.top+window.pageYOffset).toString()+"px",e.node.style.height=t.height.toString()+"px",l.Widget.attach(e,document.body)}}onDragComplete(e){super.onDragComplete(e),u.deleteDrop.isAttached&&l.Widget.detach(u.deleteDrop)}}t.RenderableOutputsMergeView=u,u._deleteDrop=null},9858:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PatchObjectHelper=void 0;const r=i(8439);class l{constructor(e,t){this._diffLUT={};let i=[];if(t)for(let e of t)i.push(e.key),this._diffLUT[e.key]=e;this._diffKeys=i,this.baseKeys=n(e)}isDiffKey(e){return r.valueIn(e,this._diffKeys)}getDiffEntry(e){return this._diffLUT[e]}entriesAfterCurrentAddRem(){if(void 0===this._currentIsAddition)throw new Error("Current op is not an add or remove op");let e=this._currentIsAddition?"remove":"add";for(let t of this._remainingKeys){if(!r.valueIn(t,this._diffKeys))return!0;if(this._diffLUT[t].op!==e)return!0}return!1}iter(){return this._remainingKeys=this.baseKeys.concat(this._diffKeys).filter(r.unique).sort(),this}keys(){return this}next(){let e=this._remainingKeys.shift();if(e&&r.valueIn(e,this._diffKeys)){let t=this._diffLUT[e].op;this._currentIsAddition="add"===t||"remove"!==t&&void 0}return e}clone(){let e=new l({},null);return e.baseKeys=this.baseKeys,e._diffKeys=this._diffKeys,e._currentIsAddition=this._currentIsAddition,e._diffLUT=this._diffLUT,e._remainingKeys=this._remainingKeys.slice(),e}}t.PatchObjectHelper=l;let n=Object.keys||function(e){let t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(let r in e)t.call(e,r)&&i.push(r);return i}},2868:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patch=void 0;const r=i(1797),l=i(8439),n=i(4632),s=i(4425);t.patch=function e(t,i){if("string"==typeof t)return s.patchString(t,i,0,!1).remote;if(Array.isArray(t))return function(t,i){if(null===i)return l.deepCopy(t);let r=[],s=0,o=0;for(let a of i){n.validateSequenceOp(t,a);let i=a.key;for(let e of t.slice(s,i))r.push(l.deepCopy(e));"addrange"===a.op?(r=r.concat(a.valuelist),o=0):"removerange"===a.op?o=a.length:"patch"===a.op&&(r.push(e(t[i],a.diff)),o=1),s=Math.max(s,i+o)}for(let e of t.slice(s))r.push(l.deepCopy(e));return r}(r.JSONExt.deepCopy(t),i);if("number"==typeof t||"boolean"==typeof t)throw new TypeError("Cannot patch an atomic type: "+typeof t);if(null===t)throw new TypeError("Cannot patch a null base!");return function(t,i){let r={},s=Object.keys(t);if(i)for(let l of i){n.validateObjectOp(t,l,s);let i=l.key;"add"===l.op?r[i]=l.value:"remove"===l.op?s.splice(s.indexOf(i),1):"replace"===l.op?(s.splice(s.indexOf(i),1),r[i]=l.value):"patch"===l.op&&(s.splice(s.indexOf(i),1),r[i]=e(t[i],l.diff))}for(let e of s)r[e]=l.deepCopy(t[e]);return r}(r.JSONExt.deepCopy(t),i)}},8787:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),l=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),l(i(9858),t),l(i(2868),t),l(i(4425),t)},4425:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchString=t.patchStringified=t.stringifyAndBlankNull=t.stringify=void 0;const r=i(9850),l=i(8439),n=i(4526),s=i(4632),o=i(8799),a=i(9858),d=i(7266);function u(e,t,i=!0){let r=d(e,{space:n.JSON_INDENT});return t&&(r=function(e,t,i){i=!1!==i;let r=e.split("\n"),s=new Array(r.length);i||(s[0]=r[0]);for(let e=i?0:1;e<r.length;e++)s[e]=l.repeatString(n.JSON_INDENT,t)+r[e];return s.join("\n")}(r,t,i)),r}function c(e,t,i,r){let l=[],s=[],a=0;if(null===t)return{remote:r?u(e,i):e,additions:l,deletions:s};t=n.flattenStringDiff(e,t);let d=0,c=0,p="";for(let i of t){let t=i.key,r=e.slice(d,t);if(p+=r,a+=r.length,"addrange"===i.op){let e=i.valuelist;l.push(new o.DiffRangeRaw(p.length,e.length,i.source)),p+=e,c=0}else"removerange"===i.op&&(c=i.length,s.push(new o.DiffRangeRaw(a,c,i.source)),a+=c);d=Math.max(d,t+c)}return p+=e.slice(d,e.length),r&&(p=u(p,i),f(i*n.JSON_INDENT.length+1,l,s),h(p,l),h(u(e,i),s)),{remote:p,additions:l,deletions:s}}function f(e,t,i){for(let i of t)i.offset(e);for(let t of i)t.offset(e)}function h(e,t){let i,r=['\\"',"\\\\","\\/","\\b","\\f","\\n","\\r","\\t"],l=/\\uD[89A-Fa-f][0-9a-fA-F]{2}\\uD[c-fC-F][0-9a-fA-F]{2}/g,n=/(?!\\uD[c-fC-F][0-9a-fA-F]{2})\\u(?!D[89A-Fa-f][0-9a-fA-F]{2})\d{4}/g,s=[],o=[];for(let t of r){let i=JSON.parse('"'+t+'"').length,r=0;for(;r=e.indexOf(t,r),!(r<0);)s.push(r),o.push(2-i),r++}for(;null!==(i=n.exec(e));)s.push(i.index),o.push(6-JSON.parse('"'+i[0]+'"').length);for(;null!==(i=l.exec(e));)s.push(i.index),o.push(12-JSON.parse('"'+i[0]+'"').length);for(let e=0;e<s.length;e++)for(let i of t){let t=s[e],r=o[e];i.from>t&&(i.from+=r),i.to>t&&(i.to+=r)}}t.stringify=u,t.stringifyAndBlankNull=function(e){return"string"==typeof e?e:null===e?"":u(e)},t.patchStringified=function e(t,i,d){if(void 0===d&&(d=0),"string"==typeof t)return c(t,i,d,d>0);if(Array.isArray(t))return function(t,i,r){let a="",d=[],c=[],h=0,p=",\n";if(null===i)return{remote:u(t,r),additions:d,deletions:c};let g=0,m=0;for(let l of i){s.validateSequenceOp(t,l);let i=l.key;for(;i>g;g++){let e=u(t[g],r+1)+p;a+=e,h+=e.length}if("addrange"===l.op){let e="";for(let t of l.valuelist)e+=u(t,r+1)+p;let n=e.length;i===t.length&&(n-=1),d.push(new o.DiffRangeRaw(a.length,n,l.source)),a+=e,m=0}else if("removerange"===l.op){let e="",n=l.length;for(let l=i;l<i+n;l++)e+=u(t[l],r+1)+p;let s=e.length;n+i===t.length&&(s-=1),c.push(new o.DiffRangeRaw(h,s,l.source)),h+=e.length,m=l.length}else if("patch"===l.op){let n=e(t[i],l.diff,r+1);m=1;let s=n.remote+p;f(a.length,n.additions,n.deletions),d=d.concat(n.additions),c=c.concat(n.deletions),h+=u(t[i],r+1).length,a+=s}g=Math.max(g,i+m)}for(;t.length>g;g++)a+=u(t[g],r+1)+p;a.slice(a.length-p.length)===p&&(a=a.slice(0,a.length-p.length));let y=l.repeatString(n.JSON_INDENT,r);return a=y+"[\n"+a+"\n"+y+"]",f(y.length+2,d,c),{remote:a,additions:d,deletions:c}}(t,i,d);if("number"==typeof t||"boolean"==typeof t)throw new TypeError("Cannot patch an atomic type: "+typeof t);if(null===t)throw new TypeError("Cannot patch a null base!");return function(t,i,d){let c="",h=[],p=[],g=",\n",m=0;if(null===i)return{remote:u(t,d),additions:h,deletions:p};let y=new a.PatchObjectHelper(t,i),D=y.baseKeys.slice();r.each(y.keys(),(i=>{let r=function(e,t){return l.repeatString(n.JSON_INDENT,t)+'"'+e+'": '}(i,d+1);if(y.isDiffKey(i)){let a=y.getDiffEntry(i);if(s.validateObjectOp(t,a,D),l.valueIn(a.op,["add","replace","remove"])){let e="replace"===a.op;if("add"===a.op||"replace"===a.op){let t=u(a.value,d+1,!1)+g,i=c.length,l=t.length;e?i+=r.length:l+=r.length,!e&&y.entriesAfterCurrentAddRem()||(l-=g.length,"add"===a.op&&(l+=1)),h.push(new o.DiffRangeRaw(i,l,a.source)),c+=r+t}if("remove"===a.op||"replace"===a.op){let l=u(t[i],d+1,!1)+g,n=m,s=l.length;e?n+=r.length:s+=r.length,!e&&y.entriesAfterCurrentAddRem()||(s-=g.length,"remove"===a.op&&(s+=1)),p.push(new o.DiffRangeRaw(n,s,a.source)),m+=r.length+l.length,D.splice(D.indexOf(i),1)}}else if("patch"===a.op){let l=e(t[i],a.diff,d+1),s=l.remote;s=r+s.slice((d+1)*n.JSON_INDENT.length)+g,f(c.length+r.length-(d+1)*n.JSON_INDENT.length,l.additions,l.deletions),c+=s,h=h.concat(l.additions),p=p.concat(l.deletions),m+=u(t[i],d+1,!1).length+r.length+g.length,D.splice(D.indexOf(i),1)}}else{let e=r+u(t[i],d+1,!1)+g;c+=e,m+=e.length}})),c.slice(c.length-g.length)===g&&(c=c.slice(0,c.length-g.length));let C=l.repeatString(n.JSON_INDENT,d);return c=C+"{\n"+c+"\n"+C+"}",f(C.length+2,h,p),{remote:c,additions:h,deletions:p}}(t,i,d)},t.patchString=c},5206:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexLayout=void 0;const r=i(9850),l=i(3211),n=i(3706);class s extends n.PanelLayout{constructor(e={}){super(),this.order=null,this._wrap=!1,this._minimumSpacing=4,this._justifyContent=null,this._alignItems=null,this._alignContent=null,this._dirty=!1,this._direction="top-to-bottom",this._stretchType=null,this._evenSizes=!1,void 0!==e.direction&&(this._direction=e.direction),void 0!==e.minimumSpacing&&(this._minimumSpacing=o.clampSpacing(e.minimumSpacing)),void 0!==e.wrap&&(this._wrap=e.wrap),void 0!==e.justifyContent&&(this._justifyContent=e.justifyContent),void 0!==e.alignItems&&(this._alignItems=e.alignItems),void 0!==e.alignContent&&(this._alignContent=e.alignContent),void 0!==e.stretchType&&(this._stretchType=e.stretchType),void 0!==e.evenSizes&&(this._evenSizes=e.evenSizes)}get direction(){return this._direction}set direction(e){this._direction!==e&&(this._direction=e,this.parent&&(o.toggleDirection(this.parent,e),this.parent.fit()))}get minimumSpacing(){return this._minimumSpacing}set minimumSpacing(e){e=o.clampSpacing(e),this._minimumSpacing!==e&&(this._minimumSpacing=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get justifyContent(){return this._justifyContent}set justifyContent(e){if(this._justifyContent===e)return;this._justifyContent=e;let t=o.translateFlexString(e);this.parent&&(this.parent.node.style.justifyContent=t,this.parent.fit())}get alignItems(){return this._alignItems}set alignItems(e){if(this._alignItems===e)return;this._alignItems=e;let t=o.translateFlexString(e);this.parent&&(this.parent.node.style.alignItems=t,this.parent.fit())}get alignContent(){return this._alignContent}set alignContent(e){if(this._alignContent===e)return;this._alignContent=e;let t=o.translateFlexString(e);this.parent&&(this.parent.node.style.alignContent=t,!1!==this._wrap&&this.parent.fit())}get stretchType(){return this._stretchType}set stretchType(e){this._stretchType!==e&&(this._stretchType=e,this.parent&&this.parent.fit())}get evenSizes(){return this._evenSizes}set evenSizes(e){this._evenSizes!==e&&(this._evenSizes=e,this.parent&&this.parent.fit())}isHorizontal(){return"right-to-left"===this.direction||"left-to-right"===this.direction}isVertical(){return!this.isHorizontal()}init(){o.toggleDirection(this.parent,this.direction),super.init()}attachWidget(e,t){super.attachWidget(e,t),this.order&&r.ArrayExt.insert(this.order,e,t),this.parent.fit()}moveWidget(e,t,i){e!==t&&(this.order||(this.order=this.widgets.slice()),r.ArrayExt.move(this.order,e,t),this._dirty=!0),this.parent.update()}detachWidget(e,t){if(this.order){let e=0;for(;e<this.order.length;++e)if(t===this.order[e]){r.ArrayExt.removeAt(this.order,e);break}}super.detachWidget(e,t),this.parent.fit()}onAfterShow(e){super.onAfterShow(e),this.parent.update()}onAfterAttach(e){super.onAfterAttach(e),o.toggleDirection(this.parent,this._direction);let t=this.parent.node.style;t.flexWrap=this._wrap?"wrap":"nowrap",t.justifyContent=o.translateFlexString(this._justifyContent)||"",t.alignContent=o.translateFlexString(this._alignContent)||"",t.alignItems=o.translateFlexString(this._alignItems)||"",this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update()}onUpdateRequest(e){this.parent.isVisible&&this._update()}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){this._dirty=!0;let e=this.parent.parent;e&&l.MessageLoop.sendMessage(e,n.Widget.Msg.FitRequest),this._dirty&&l.MessageLoop.sendMessage(this.parent,n.Widget.Msg.UpdateRequest)}_update(){this._dirty=!1;let e=this.order||this.widgets;if(0===e.length)return;let t=this.minimumSpacing.toString()+"px";if(this.isHorizontal())for(let i=0;i<e.length-1;++i)e[i].node.style.marginRight=t;else for(let i=0;i<e.length-1;++i)e[i].node.style.marginBottom=t;if(this._evenSizes||this.stretchType){let t=null,i=null,r=null;if(this._evenSizes)t=0,i=1;else switch(this._stretchType){case"grow":i=1,r=0;break;case"shrink":i=0,r=1;break;case"both":i=1,r=1;break;case"fixed":i=0,r=0;break;default:throw new TypeError("Invalid stretch type: "+this._stretchType)}for(let l=0;l<e.length;++l){let n=e[l].node.style;null!==t&&(n.flexBasis=t.toString()),null!==i&&(n.flexGrow=i.toString()),null!==r&&(n.flexShrink=r.toString())}}for(let t=0;t<e.length;++t)e[t].node.style.order=this.order?t.toString():""}}var o;t.FlexLayout=s,function(e){e.getGrow=function(e){let t=e.node.style.flexGrow;return t?parseInt(t,10):null},e.setGrow=function(e,t,i=!0){e.node.style.flexGrow=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getShrink=function(e){let t=e.node.style.flexShrink;return t?parseInt(t,10):null},e.setShrink=function(e,t,i=!0){e.node.style.flexShrink=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getSizeBasis=function(e){let t=e.node.style.flexBasis;return"auto"===t?"auto":t?parseInt(t.replace("px",""),10):null},e.setSizeBasis=function(e,t,i=!0){e.node.style.flexBasis="auto"===t?t:null===t?"":t.toString()+"px",i&&e.parent&&e.parent.fit()}}(s=t.FlexLayout||(t.FlexLayout={})),function(e){e.isHorizontal=function(e){return"left-to-right"===e||"right-to-left"===e},e.translateFlexString=function(e){return"start"!==e&&"end"!==e||(e="flex-"+e),e},e.toggleDirection=function(e,t){e.toggleClass("p-mod-left-to-right","left-to-right"===t),e.toggleClass("p-mod-right-to-left","right-to-left"===t),e.toggleClass("p-mod-top-to-bottom","top-to-bottom"===t),e.toggleClass("p-mod-bottom-to-top","bottom-to-top"===t)},e.clampSpacing=function(e){return Math.max(0,Math.floor(e))}}(o||(o={}))},5168:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexPanel=void 0;const r=i(5206),l=i(3706),n="p-FlexPanel-child";class s extends l.Panel{constructor(e={}){super({layout:o.createLayout(e)}),e.layout||(void 0!==e.minimumSpacing&&(this.minimumSpacing=e.minimumSpacing),void 0!==e.direction&&(this.direction=e.direction)),this.addClass("p-FlexPanel")}get direction(){return this.layout.direction}set direction(e){this.layout.direction=e}get minimumSpacing(){return this.layout.minimumSpacing}set minimumSpacing(e){this.layout.minimumSpacing=e}get wrap(){return this.layout.wrap}set wrap(e){this.layout.wrap=e}get justifyContent(){return this.layout.justifyContent}set justifyContent(e){this.layout.justifyContent=e}get alignItems(){return this.layout.alignItems}set alignItems(e){this.layout.alignItems=e}get alignContent(){return this.layout.alignContent}set alignContent(e){this.layout.alignContent=e}get stretchType(){return this.layout.stretchType}set stretchType(e){this.layout.stretchType=e}get evenSizes(){return this.layout.evenSizes}set evenSizes(e){this.layout.evenSizes=e}onChildAdded(e){e.child.addClass(n)}onChildRemoved(e){e.child.removeClass(n)}onAfterAttach(e){super.onAfterAttach(e),this.fit()}}var o;t.FlexPanel=s,function(e){e.getGrow=function(e){return r.FlexLayout.getGrow(e)},e.setGrow=function(e,t){r.FlexLayout.setGrow(e,t)},e.getShrink=function(e){return r.FlexLayout.getShrink(e)},e.setShrink=function(e,t){r.FlexLayout.setShrink(e,t)},e.getSizeBasis=function(e){return r.FlexLayout.getSizeBasis(e)},e.setSizeBasis=function(e,t){r.FlexLayout.setSizeBasis(e,t)}}(s=t.FlexPanel||(t.FlexPanel={})),function(e){e.createLayout=function(e){return e.layout||new r.FlexLayout(e)}}(o||(o={}))}}]);